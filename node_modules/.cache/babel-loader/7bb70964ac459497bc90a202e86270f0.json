{"ast":null,"code":"var _jsxFileName = \"/Users/horikazuto/ChooseOne/LatestChooseOne/src/screens/QuestionDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, Fragment } from 'react';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport { createMuiTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport Skeleton, { SkeletonTheme } from 'react-loading-skeleton';\nimport { WindMillLoading } from 'react-loadingg';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { Helmet } from \"react-helmet\";\nimport { Wave } from \"react-animated-text\";\nimport InfiniteScroll from \"react-infinite-scroller\";\nimport axios from \"axios\";\nimport QuestionList from '../components/QuestionList';\nimport ModalDelete from '../components/ModalDelete';\nimport PieChart from '../components/PieChart';\nimport BarChart from '../components/BarChart'; // Firebase\n\nimport { getApps, initializeApp } from 'firebase/app';\nimport { getFirestore, updateDoc, increment, collection, deleteDoc, startAfter, arrayRemove, arrayUnion, query, where, getDoc, doc, getDocs, orderBy, limit } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyArjDv3hS4_rw1YyNz-JFXDX1ufF72bqr8\",\n  authDomain: \"chooseone-105a9.firebaseapp.com\",\n  databaseURL: \"https://chooseone-default-rtdb.firebaseio.com\",\n  projectId: \"chooseone\",\n  storageBucket: \"chooseone.appspot.com\",\n  messagingSenderId: \"722704825746\",\n  appId: \"1:722704825746:web:73f11551b9e59f4bc2d54b\",\n  measurementId: \"G-YJ97DZH6V5\"\n};\nvar db = '';\n\nif (!getApps().length) {\n  const firebaseApp = initializeApp(firebaseConfig);\n  db = getFirestore(firebaseApp);\n} else {\n  db = getFirestore();\n}\n\nvar tabColors = ['#ff69b4'];\n\nfor (var i = 1; i < 11; i++) tabColors.push('hsla(' + i * 100 + ', 75%, 55%, 1)');\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: 'rgb(3, 122, 255)'\n    },\n    secondary: {\n      main: '#f50057'\n    },\n    green: {\n      main: 'rgb(40, 168, 69)'\n    }\n  }\n});\nexport default function QuestionDetail(props) {\n  _s();\n\n  const uid = localStorage.getItem('chooseoneUid');\n  const the_slug = props.match.params.the_slug;\n  const [modalVisible, setModalVisible] = useState(false);\n  const [user, setUser] = useState(null);\n  const [madeIt, setMadeIt] = useState(null);\n  const [the_question, setTheQuestion] = useState(null);\n  const [likeIt, setLikeIt] = useState(false);\n  const [your_vote, setYourVote] = useState(null);\n  var choicesSorted = [];\n  const [relatedQues, setRelatedQues] = useState([]);\n  const [answered, setAnswered] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [end, setEnd] = useState(null);\n  const [last, setLast] = useState(null);\n  const loaded = relatedQues.length !== 0;\n  const styles = useStyles();\n  const smallDisplay = useMediaQuery('(max-width:500px)');\n  var l = [];\n  var v = [];\n  var c = [];\n  var content = '';\n\n  if (the_question) {\n    for (var i = 0; i < the_question.choices.length; i++) {\n      if (i) content += the_question.choices[i].choice_text;else content += ' vs ' + the_question.choices[i].choice_text;\n    }\n  }\n\n  const questionRef = doc(db, 'questions', the_slug);\n  const userRef = user !== null ? doc(db, 'users', uid) : ''; // QuestionDetail\n\n  const [warning, setWarning] = useState(null);\n  const [the_choice, setTheChoice] = useState(null);\n  var choiceSkeleton = [];\n\n  for (var i = 0; i < 5 - smallDisplay * 2; i++) {\n    choiceSkeleton.push( /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: 30,\n        marginTop: 15\n      },\n      children: /*#__PURE__*/_jsxDEV(SkeletonTheme, {\n        Primarycolor: \"white\",\n        highlightColor: \"#d3d3d3\",\n        children: /*#__PURE__*/_jsxDEV(Skeleton, {\n          duration: 2,\n          color: \"white\",\n          width: 100,\n          height: 15 - smallDisplay * 5\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 133\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 72\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }, this));\n  }\n\n  useEffect(() => {\n    if (uid === null || user !== null) return null;\n\n    if (user === null) {\n      // const u = doc(db, 'users', uid);\n      // const promise = new Promise(function(resolve) {\n      //   resolve(getDoc(u));\n      // })\n      // promise.then((us) => {\n      // if(us.exists){var the_user = us.data();}\n      axios.get('http://127.0.0.1:8000/api/users').then(response => {\n        const users = response.data.filter(u => u.uid === uid);\n        const the_user = users[0];\n        console.log(response.data);\n        console.log();\n        setUser(the_user);\n\n        if (the_user.question_liked.includes(the_slug)) {\n          setLikeIt(true);\n        } else {\n          setLikeIt(false);\n        }\n\n        if (the_user.question_created.includes(the_slug)) {\n          setMadeIt(true);\n        } else {\n          setMadeIt(false);\n        }\n\n        if (the_user.question_voted.some(q => q.question === the_slug)) {\n          setAnswered(true);\n\n          for (var i = 0; i < the_user.question_voted.length; i++) {\n            if (the_user.question_voted[i].question === the_slug) setYourVote(the_user.question_voted[i].answer);\n          }\n        }\n      }).catch(error => {\n        window.location.href = '/';\n      });\n    } // const qu = doc(db, 'questions', the_slug);\n    // const promiseD = new Promise(function(resolve, reject) {\n    //   resolve(getDoc(qu));\n    // })\n    // promiseD.then((doc) => {\n    //   if(doc.exists){\n\n\n    axios.get('http://127.0.0.1:8000/api/questions').then(response => {\n      const the_que = response.data.filter(q => q.slug === the_slug);\n      console.log(the_que[0]);\n      if (the_que.length === 0) window.location.href = '/';\n      setTheQuestion(the_que[0]);\n      const ques = response.data.filter(q => q.category in the_que[0].category);\n      setRelatedQues(ques); // const ques = query(collection(db, 'questions'), where('category', 'array-contains-any', t.category), orderBy('created_at', 'desc'), limit(10));\n      // const promiseDD = new Promise(function(resolve) {\n      //   resolve(getDocs(ques));\n      // })\n      // promiseDD.then(qq => {\n      //   var questionSimilar = [];\n      //   Promise.all(qq.docs.map(async doc => {\n      //     questionSimilar.push(doc.data());\n      //     if(questionSimilar.length === 10) setLast(doc);\n      //   })).then(() => {\n      //     setRelatedQues(questionSimilar);\n      //   });\n      // })\n    }).catch(error => {\n      window.location.href = '/';\n    }); // if(end === null){\n    //   setEnd(query(collection(db, 'questions'), orderBy('created_at', 'asc'), limit(1)));\n    // }\n  });\n\n  const loadMore = async () => {\n    var more = true;\n    setHasMore(false);\n    const next = await getDocs(query(collection(db, 'questions'), where('category', 'array-contains-any', the_question.category), orderBy('created_at', 'desc'), startAfter(last), limit(10)));\n    var ques = [];\n    await Promise.all(next.docs.map(async doc => {\n      ques.push(doc.data());\n\n      if (doc === end || ques.length === 10) {\n        if (doc === end) more = false;\n        setLast(doc);\n      }\n    })).then(() => setRelatedQues(relatedQues.concat(ques)));\n    if (more) setHasMore(true);else setHasMore(false);\n  };\n\n  const onChoice = async idx => {\n    const the_choice = idx;\n    var the_slug = the_question.slug;\n    var your_vote = the_question.choices[the_choice].choice_text;\n    setYourVote(your_vote);\n    setAnswered(true);\n    var copy = Object.create(the_question);\n    copy.choices[the_choice].votes = parseInt(copy.choices[the_choice].votes, 10) + 1;\n    setTheQuestion(copy.__proto__);\n    await updateDoc(questionRef, {\n      choices: copy.choices,\n      all_votes: increment(1),\n      users_voted: arrayUnion(uid)\n    });\n    await updateDoc(userRef, {\n      question_voted: arrayUnion({\n        question: the_slug,\n        answer: your_vote\n      })\n    });\n  };\n\n  const onLikeit = async () => {\n    if (likeIt) {\n      setLikeIt(false);\n      await updateDoc(userRef, {\n        question_liked: arrayRemove(the_question.slug)\n      });\n      await updateDoc(questionRef, {\n        likes: increment(-1)\n      });\n      setTheQuestion({ ...the_question,\n        likes: the_question.likes - 1\n      });\n    } else {\n      setLikeIt(true);\n      await updateDoc(userRef, {\n        question_liked: arrayUnion(the_question.slug)\n      });\n      await updateDoc(questionRef, {\n        likes: increment(1)\n      });\n      setTheQuestion({ ...the_question,\n        likes: the_question.likes + 1\n      });\n    }\n  };\n\n  const onDelete = async () => {\n    await deleteDoc(questionRef);\n    await updateDoc(userRef, {\n      question_created: arrayRemove(the_question.slug)\n    });\n    window.location.href = \"/\";\n  };\n\n  const onClose = () => {\n    setModalVisible(false);\n  };\n\n  if (the_question) {\n    var copy = Array.from(the_question.choices);\n    copy.sort(function (first, second) {\n      if (first.votes > second.votes) {\n        return -1;\n      } else if (first.votes < second.votes) {\n        return 1;\n      } else {\n        return 0;\n      }\n    });\n    choicesSorted = copy;\n\n    for (let i = 0; i < copy.length; i++) {\n      l.push(copy[i].choice_text);\n      v.push(copy[i].votes);\n    }\n\n    var time = the_question.created_at;\n    var seconds = parseInt(time.slice(-2));\n\n    if (v !== []) {\n      v.forEach((entry, idx) => {\n        c.push('hsla(' + (idx + seconds) * 70 + ',75%,75%,1)');\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      title: loaded && the_question.title,\n      meta: [{\n        name: 'description',\n        content: {\n          content\n        }\n      }]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.resultsPos,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.forSmallerVer,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.category,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-primary fa fa-tag\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 44\n            }, this), \"Category:\", loaded && /*#__PURE__*/_jsxDEV(Fragment, {\n              children: the_question.category.map((cate, idx) => {\n                if (idx === 0) {\n                  return /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: \"text-primary\",\n                    href: '/category/' + cate,\n                    children: [\" \", cate]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 314,\n                    columnNumber: 31\n                  }, this);\n                } else {\n                  return /*#__PURE__*/_jsxDEV(\"a\", {\n                    className: \"text-primary\",\n                    href: '/category/' + cate,\n                    children: [\", \", cate]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 31\n                  }, this);\n                }\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this), !loaded && /*#__PURE__*/_jsxDEV(Skeleton, {\n              style: {\n                marginLeft: 10\n              },\n              width: 60\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 27\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this), modalVisible && /*#__PURE__*/_jsxDEV(ModalDelete, {\n          onClose: onClose,\n          onDelete: onDelete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.title,\n          children: loaded ? the_question.title : /*#__PURE__*/_jsxDEV(SkeletonTheme, {\n            color: \"white\",\n            highlightColor: \"#d3d3d3\",\n            children: /*#__PURE__*/_jsxDEV(Skeleton, {\n              duration: 2,\n              width: 1000 - smallDisplay * 720,\n              height: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 124\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 70\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.date,\n          children: loaded ? the_question.created_on : /*#__PURE__*/_jsxDEV(SkeletonTheme, {\n            color: \"white\",\n            highlightColor: \"#d3d3d3\",\n            children: /*#__PURE__*/_jsxDEV(Skeleton, {\n              duration: 2,\n              color: \"white\",\n              width: 100,\n              height: 7\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 103\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: 15\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            style: {\n              marginRight: 10,\n              color: '#55acee',\n              outline: 'none',\n              border: 'none'\n            },\n            className: \"tip\",\n            rel: \"noreferrer\",\n            href: loaded && 'https://twitter.com/share?url=https://www.chooseone.app/' + the_question.slug + \"/&text=\" + the_question.title,\n            target: \"_blank\",\n            \"data-toggle\": \"tooltip\",\n            title: \"Share\",\n            children: /*#__PURE__*/_jsxDEV(TwitterIcon, {\n              style: {\n                fontSize: smallDisplay && '18'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 303\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            style: {\n              color: '#3B5998',\n              outline: 'none',\n              border: 'none'\n            },\n            rel: \"noreferrer\",\n            href: loaded && \"https://www.facebook.com/share.php?u=https://www.chooseone.app/\" + the_question.slug,\n            target: \"_blank\",\n            \"data-toggle\": \"tooltip\",\n            title: \"Share\",\n            children: /*#__PURE__*/_jsxDEV(FacebookIcon, {\n              style: {\n                fontSize: smallDisplay && '18'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 248\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), answered && loaded && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: styles.your_vote,\n            children: [\"You have voted for \", your_vote]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this), !answered && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 20\n        },\n        children: [loaded && /*#__PURE__*/_jsxDEV(Fragment, {\n          children: the_question.choices.map((choice, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.choiceBtnPos,\n            children: /*#__PURE__*/_jsxDEV(StyledButton, {\n              variant: \"outlined\",\n              color: \"primary\",\n              onClick: () => onChoice(idx),\n              children: choice.choice_text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 19\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 15\n        }, this), !loaded && [choiceSkeleton], warning !== null && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: styles.warning,\n          children: warning\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 35\n        }, this), loaded && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.voteBtnPos,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.messageTextPos,\n            children: /*#__PURE__*/_jsxDEV(Wave, {\n              delay: 3,\n              text: \" TAP & GET SURPRISED\",\n              effect: \"verticalFadeIn\",\n              effectChange: 5.0\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 11\n      }, this), answered && loaded && /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.table,\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table\",\n            style: {\n              margin: 0\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 385,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Choices\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 386,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: \"Votes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: choicesSorted.map((choice, idx) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                style: {\n                  backgroundColor: c[idx]\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"row\",\n                  children: [\"\\xA0\\xA0\", idx + 1]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 393,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: choice.choice_text\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: choice.votes\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 392,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 390,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.graphs,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.pieGraph,\n            children: /*#__PURE__*/_jsxDEV(PieChart, {\n              skeleton: !loaded,\n              small: smallDisplay,\n              labels: l,\n              values: v,\n              colors: c\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.barGraph,\n            children: /*#__PURE__*/_jsxDEV(BarChart, {\n              skeleton: !loaded,\n              small: smallDisplay,\n              labels: l,\n              values: v,\n              colors: c\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 11\n      }, this), loaded && /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.buttonsPos,\n          style: {\n            marginTop: 100 - answered * 80\n          },\n          children: /*#__PURE__*/_jsxDEV(ThemeProvider, {\n            theme: theme,\n            children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n              size: smallDisplay ? 'small' : 'default',\n              variant: \"contained\",\n              children: [!likeIt && /*#__PURE__*/_jsxDEV(Button, {\n                onClick: onLikeit,\n                startIcon: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 415,\n                  columnNumber: 69\n                }, this),\n                color: \"primary\",\n                style: {\n                  fontSize: 12\n                },\n                children: loaded ? the_question.likes : 'Like'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 31\n              }, this), likeIt && /*#__PURE__*/_jsxDEV(Button, {\n                onClick: onLikeit,\n                startIcon: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n                  color: \"secondary\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 68\n                }, this),\n                color: \"primary\",\n                style: {\n                  fontSize: 12\n                },\n                children: loaded ? the_question.likes : 'Like'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 416,\n                columnNumber: 30\n              }, this), madeIt && /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => setModalVisible(true),\n                startIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {\n                  fontSize: \"small\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 87\n                }, this),\n                style: {\n                  fontSize: 12\n                },\n                color: \"secondary\",\n                children: \"Delete\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 417,\n                columnNumber: 30\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 414,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 13\n        }, this), answered && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: styles.mayLike,\n            children: \"Questions You May Like\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.similarPostsPos,\n            children: [/*#__PURE__*/_jsxDEV(InfiniteScroll, {\n              loadMore: loadMore,\n              hasMore: hasMore,\n              threshold: 500,\n              loader: /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 29\n              }, this),\n              children: relatedQues.length !== 0 && /*#__PURE__*/_jsxDEV(QuestionList, {\n                questions: relatedQues\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 433,\n                columnNumber: 50\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 19\n            }, this), relatedQues.length === 0 && /*#__PURE__*/_jsxDEV(WindMillLoading, {\n              style: {\n                position: 'relative',\n                marginTop: 50,\n                marginLeft: 50\n              },\n              color: \"rgb(39, 169, 68)\",\n              speed: 1.2,\n              size: \"large\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 48\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 296,\n    columnNumber: 5\n  }, this);\n}\n\n_s(QuestionDetail, \"9orePZ7zn7m6xwr2mecfYKI4Suk=\", false, function () {\n  return [useStyles, useMediaQuery];\n});\n\n_c = QuestionDetail;\nconst useStyles = makeStyles(() => createStyles({\n  choiceButton: {},\n  messageTextPos: {\n    fontSize: 13,\n    marginTop: 40,\n    fontFamily: 'Impact, sans-serif',\n    fontStyle: 'italic',\n    fontWeight: 900,\n    letterSpacing: '0.3em',\n    color: 'rgb(40, 168, 69)',\n    textShadow: '0.2 0.5px 0.5px 0px #004' // transform: 'rotate(-10deg)',\n\n  },\n  category: {\n    fontFamily: 'latienne-pro, serif',\n    fontStyle: 'normal',\n    fontWeight: 400,\n    fontSize: 12\n  },\n  title: {\n    fontFamily: 'latienne-pro, serif',\n    fontStyle: 'normal',\n    fontWeight: 500,\n    fontSize: 25\n  },\n  mayLike: {\n    marginTop: 40,\n    marginBottom: 20,\n    fontFamily: 'lust-script, sans-serif',\n    fontStyle: 'normal',\n    fontWeight: 700\n  },\n  similarPostsPos: {\n    width: '70%'\n  },\n  table: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    marginTop: 20,\n    marginBottom: 25,\n    backgroundColor: 'white',\n    width: '100%'\n  },\n  graphs: {\n    display: 'flex',\n    width: '100%',\n    marginBottom: 15\n  },\n  pieGraph: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    padding: 10,\n    width: '49%',\n    backgroundColor: 'white',\n    height: 400,\n    marginRight: 10\n  },\n  barGraph: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    padding: 10,\n    width: '50%',\n    backgroundColor: 'white',\n    height: 400\n  },\n  your_vote: {\n    color: 'yellowgreen',\n    fontSize: 14\n  },\n  resultsPos: {\n    paddingTop: 15,\n    width: '100%',\n    paddingBottom: 30\n  },\n  date: {\n    marginLeft: 20,\n    fontFamily: 'georgia, serif',\n    fontSize: 12,\n    color: '#457AFB'\n  },\n  // QuestionDetail\n  the_choice: {\n    marginLeft: 0\n  },\n  choiceBtnPos: {\n    marginLeft: 25,\n    marginBottom: 8,\n    fontSize: 12\n  },\n  voteBtnPos: {\n    marginTop: 20,\n    marginLeft: 25\n  },\n  buttons: {\n    borderRadius: 30\n  },\n  warning: {\n    color: 'red',\n    fontSize: 12,\n    margin: '0px 0px 0px 25px',\n    padding: 0\n  },\n  '@media (max-width: 500px)': {\n    date: {\n      marginBottom: 10\n    },\n    your_vote: {\n      fontSize: 12,\n      marginBottom: 10\n    },\n    category: {\n      fontSize: 12\n    },\n    title: {\n      fontSize: 24,\n      marginTop: 10\n    },\n    mayLike: {\n      margin: '40px 0px 5px 10px',\n      fontSize: 20\n    },\n    buttonsPos: {\n      marginLeft: 15\n    },\n    forSmallerVer: {\n      paddingLeft: 15 // marginTop: 10,\n\n    },\n    table: {\n      filter: 'drop-shadow(5px 0px 4px rgba(160, 160, 160, 0.7))',\n      marginTop: 10,\n      marginBottom: 4\n    },\n    pieGraph: {\n      filter: 'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',\n      height: 150,\n      marginBottom: 7,\n      borderRadius: 4,\n      padding: 4,\n      marginRight: 3\n    },\n    barGraph: {\n      filter: 'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',\n      height: 150,\n      marginBottom: 4,\n      borderRadius: 4,\n      padding: 4\n    },\n    similarPostsPos: {\n      width: '100%'\n    },\n    voteBtnPos: {\n      marginLeft: 15 //　元は15\n\n    },\n    messageTextPos: {\n      marginLeft: 30\n    },\n    choiceBtnPos: {\n      marginLeft: 35\n    }\n  }\n}));\nconst StyledButton = withStyles({\n  root: {\n    borderColor: 'rgb(3, 122, 255)',\n    color: 'rgb(3, 122, 255)',\n    fontSize: 11,\n    borderRadius: 15,\n    width: Math.min(300, window.innerWidth * 0.6),\n    textTransform: 'none'\n  }\n})(Button);\n\nvar _c;\n\n$RefreshReg$(_c, \"QuestionDetail\");","map":{"version":3,"sources":["/Users/horikazuto/ChooseOne/LatestChooseOne/src/screens/QuestionDetail.js"],"names":["React","useEffect","useState","Fragment","Button","ButtonGroup","DeleteIcon","FavoriteIcon","makeStyles","createStyles","createMuiTheme","ThemeProvider","withStyles","TwitterIcon","FacebookIcon","Skeleton","SkeletonTheme","WindMillLoading","useMediaQuery","Helmet","Wave","InfiniteScroll","axios","QuestionList","ModalDelete","PieChart","BarChart","getApps","initializeApp","getFirestore","updateDoc","increment","collection","deleteDoc","startAfter","arrayRemove","arrayUnion","query","where","getDoc","doc","getDocs","orderBy","limit","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","length","firebaseApp","tabColors","i","push","theme","palette","primary","main","secondary","green","QuestionDetail","props","uid","localStorage","getItem","the_slug","match","params","modalVisible","setModalVisible","user","setUser","madeIt","setMadeIt","the_question","setTheQuestion","likeIt","setLikeIt","your_vote","setYourVote","choicesSorted","relatedQues","setRelatedQues","answered","setAnswered","hasMore","setHasMore","end","setEnd","last","setLast","loaded","styles","useStyles","smallDisplay","l","v","c","content","choices","choice_text","questionRef","userRef","warning","setWarning","the_choice","setTheChoice","choiceSkeleton","marginLeft","marginTop","get","then","response","users","data","filter","u","the_user","console","log","question_liked","includes","question_created","question_voted","some","q","question","answer","catch","error","window","location","href","the_que","slug","ques","category","loadMore","more","next","Promise","all","docs","map","concat","onChoice","idx","copy","Object","create","votes","parseInt","__proto__","all_votes","users_voted","onLikeit","likes","onDelete","onClose","Array","from","sort","first","second","time","created_at","seconds","slice","forEach","entry","title","name","resultsPos","forSmallerVer","cate","date","created_on","marginBottom","marginRight","color","outline","border","fontSize","choice","choiceBtnPos","voteBtnPos","messageTextPos","table","margin","backgroundColor","graphs","pieGraph","barGraph","buttonsPos","mayLike","similarPostsPos","position","choiceButton","fontFamily","fontStyle","fontWeight","letterSpacing","textShadow","width","borderRadius","display","padding","height","paddingTop","paddingBottom","buttons","paddingLeft","StyledButton","root","borderColor","Math","min","innerWidth","textTransform"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,QAArC,QAAqD,OAArD;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,SAASC,UAAT,EAAqBC,YAArB,QAAyC,mBAAzC;AACA,SAASC,cAAT,EAAyBC,aAAzB,EAAwCC,UAAxC,QAA0D,0BAA1D;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,YAAP,MAAyB,6BAAzB;AACA,OAAOC,QAAP,IAAmBC,aAAnB,QAAwC,wBAAxC;AACA,SAASC,eAAT,QAAgC,gBAAhC;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,SAASC,MAAT,QAAuB,cAAvB;AACA,SAASC,IAAT,QAAqB,qBAArB;AACA,OAAOC,cAAP,MAA4B,yBAA5B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,YAAP,MAAyB,4BAAzB;AACA,OAAOC,WAAP,MAAwB,2BAAxB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,OAAOC,QAAP,MAAqB,wBAArB,C,CAEA;;AACA,SAASC,OAAT,EAAkBC,aAAlB,QAAuC,cAAvC;AACA,SAASC,YAAT,EAAuBC,SAAvB,EAAkCC,SAAlC,EAA6CC,UAA7C,EAAyDC,SAAzD,EAAoEC,UAApE,EAAgFC,WAAhF,EAA6FC,UAA7F,EAAyGC,KAAzG,EACMC,KADN,EACaC,MADb,EACqBC,GADrB,EAC0BC,OAD1B,EACmCC,OADnC,EAC4CC,KAD5C,QACyD,oBADzD;;AAEA,MAAMC,cAAc,GAAG;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,iCAFS;AAGrBC,EAAAA,WAAW,EAAE,+CAHQ;AAIrBC,EAAAA,SAAS,EAAE,WAJU;AAKrBC,EAAAA,aAAa,EAAE,uBALM;AAMrBC,EAAAA,iBAAiB,EAAE,cANE;AAOrBC,EAAAA,KAAK,EAAE,2CAPc;AAQrBC,EAAAA,aAAa,EAAE;AARM,CAAvB;AAUA,IAAIC,EAAE,GAAG,EAAT;;AACA,IAAI,CAAC1B,OAAO,GAAG2B,MAAf,EAAsB;AACpB,QAAMC,WAAW,GAAG3B,aAAa,CAACgB,cAAD,CAAjC;AACAS,EAAAA,EAAE,GAAGxB,YAAY,CAAC0B,WAAD,CAAjB;AACD,CAHD,MAGK;AACHF,EAAAA,EAAE,GAAGxB,YAAY,EAAjB;AACD;;AAED,IAAI2B,SAAS,GAAG,CAAC,SAAD,CAAhB;;AACA,KAAI,IAAIC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC,EAAf,EAAmBA,CAAC,EAApB,EAAwBD,SAAS,CAACE,IAAV,CAAe,UAASD,CAAC,GAAC,GAAX,GAAgB,gBAA/B;;AAExB,MAAME,KAAK,GAAGjD,cAAc,CAAC;AAC3BkD,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO,EAAE;AACPC,MAAAA,IAAI,EAAE;AADC,KADF;AAIPC,IAAAA,SAAS,EAAE;AACTD,MAAAA,IAAI,EAAE;AADG,KAJJ;AAOPE,IAAAA,KAAK,EAAE;AACLF,MAAAA,IAAI,EAAE;AADD;AAPA;AADkB,CAAD,CAA5B;AAcA,eAAe,SAASG,cAAT,CAAyBC,KAAzB,EAAgC;AAAA;;AAE7C,QAAMC,GAAG,GAAGC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAZ;AACA,QAAMC,QAAQ,GAAGJ,KAAK,CAACK,KAAN,CAAYC,MAAZ,CAAmBF,QAApC;AAEA,QAAM,CAACG,YAAD,EAAeC,eAAf,IAAkCxE,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACyE,IAAD,EAAOC,OAAP,IAAkB1E,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAAC2E,MAAD,EAASC,SAAT,IAAsB5E,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAAC6E,YAAD,EAAeC,cAAf,IAAiC9E,QAAQ,CAAC,IAAD,CAA/C;AACA,QAAM,CAAC+E,MAAD,EAASC,SAAT,IAAsBhF,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACiF,SAAD,EAAYC,WAAZ,IAA2BlF,QAAQ,CAAC,IAAD,CAAzC;AACA,MAAImF,aAAa,GAAG,EAApB;AACA,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCrF,QAAQ,CAAC,EAAD,CAA9C;AACA,QAAM,CAACsF,QAAD,EAAWC,WAAX,IAA0BvF,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAM,CAACwF,OAAD,EAAUC,UAAV,IAAwBzF,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAAC0F,GAAD,EAAMC,MAAN,IAAgB3F,QAAQ,CAAC,IAAD,CAA9B;AACA,QAAM,CAAC4F,IAAD,EAAOC,OAAP,IAAkB7F,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAM8F,MAAM,GAAGV,WAAW,CAAChC,MAAZ,KAAuB,CAAtC;AACA,QAAM2C,MAAM,GAAGC,SAAS,EAAxB;AACA,QAAMC,YAAY,GAAGjF,aAAa,CAAC,mBAAD,CAAlC;AACA,MAAIkF,CAAC,GAAG,EAAR;AACA,MAAIC,CAAC,GAAG,EAAR;AACA,MAAIC,CAAC,GAAG,EAAR;AACA,MAAIC,OAAO,GAAG,EAAd;;AACA,MAAGxB,YAAH,EAAgB;AACd,SAAI,IAAItB,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACsB,YAAY,CAACyB,OAAb,CAAqBlD,MAApC,EAA4CG,CAAC,EAA7C,EAAgD;AAC9C,UAAGA,CAAH,EAAM8C,OAAO,IAAIxB,YAAY,CAACyB,OAAb,CAAqB/C,CAArB,EAAwBgD,WAAnC,CAAN,KACKF,OAAO,IAAI,SAASxB,YAAY,CAACyB,OAAb,CAAqB/C,CAArB,EAAwBgD,WAA5C;AACN;AACF;;AAED,QAAMC,WAAW,GAAGlE,GAAG,CAACa,EAAD,EAAK,WAAL,EAAkBiB,QAAlB,CAAvB;AACA,QAAMqC,OAAO,GAAGhC,IAAI,KAAK,IAAT,GAAgBnC,GAAG,CAACa,EAAD,EAAK,OAAL,EAAcc,GAAd,CAAnB,GAAwC,EAAxD,CAjC6C,CAmC7C;;AACA,QAAM,CAACyC,OAAD,EAAUC,UAAV,IAAwB3G,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAAC4G,UAAD,EAAaC,YAAb,IAA6B7G,QAAQ,CAAC,IAAD,CAA3C;AACA,MAAI8G,cAAc,GAAG,EAArB;;AACA,OAAI,IAAIvD,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAE,IAAE0C,YAAY,GAAC,CAA/B,EAAmC1C,CAAC,EAApC,EAAuC;AACrCuD,IAAAA,cAAc,CAACtD,IAAf,eAAoB;AAAK,MAAA,KAAK,EAAE;AAAEuD,QAAAA,UAAU,EAAE,EAAd;AAAkBC,QAAAA,SAAS,EAAE;AAA7B,OAAZ;AAAA,6BAA+C,QAAC,aAAD;AAAe,QAAA,YAAY,EAAC,OAA5B;AAAoC,QAAA,cAAc,EAAC,SAAnD;AAAA,+BAA6D,QAAC,QAAD;AAAU,UAAA,QAAQ,EAAE,CAApB;AAAuB,UAAA,KAAK,EAAC,OAA7B;AAAqC,UAAA,KAAK,EAAE,GAA5C;AAAiD,UAAA,MAAM,EAAE,KAAKf,YAAY,GAAC;AAA3E;AAAA;AAAA;AAAA;AAAA;AAA7D;AAAA;AAAA;AAAA;AAAA;AAA/C;AAAA;AAAA;AAAA;AAAA,YAApB;AACD;;AAEDlG,EAAAA,SAAS,CAAC,MAAM;AACd,QAAGkE,GAAG,KAAK,IAAR,IAAgBQ,IAAI,KAAK,IAA5B,EAAkC,OAAO,IAAP;;AAElC,QAAGA,IAAI,KAAK,IAAZ,EAAiB;AACf;AACA;AACA;AACA;AACA;AACE;AAEFrD,MAAAA,KAAK,CAAC6F,GAAN,CAAU,iCAAV,EACGC,IADH,CACQC,QAAQ,IAAI;AAChB,cAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAcC,MAAd,CAAqBC,CAAC,IAAIA,CAAC,CAACtD,GAAF,KAAUA,GAApC,CAAd;AACA,cAAMuD,QAAQ,GAAGJ,KAAK,CAAC,CAAD,CAAtB;AAEAK,QAAAA,OAAO,CAACC,GAAR,CAAYP,QAAQ,CAACE,IAArB;AACAI,QAAAA,OAAO,CAACC,GAAR;AAEAhD,QAAAA,OAAO,CAAC8C,QAAD,CAAP;;AAEA,YAAIA,QAAQ,CAACG,cAAT,CAAwBC,QAAxB,CAAiCxD,QAAjC,CAAJ,EAA+C;AAC7CY,UAAAA,SAAS,CAAC,IAAD,CAAT;AACD,SAFD,MAEK;AACHA,UAAAA,SAAS,CAAC,KAAD,CAAT;AACD;;AAED,YAAIwC,QAAQ,CAACK,gBAAT,CAA0BD,QAA1B,CAAmCxD,QAAnC,CAAJ,EAAiD;AAC/CQ,UAAAA,SAAS,CAAC,IAAD,CAAT;AACD,SAFD,MAEK;AACHA,UAAAA,SAAS,CAAC,KAAD,CAAT;AACD;;AAED,YAAG4C,QAAQ,CAACM,cAAT,CAAwBC,IAAxB,CAA8BC,CAAD,IAAOA,CAAC,CAACC,QAAF,KAAe7D,QAAnD,CAAH,EAAgE;AAC9DmB,UAAAA,WAAW,CAAC,IAAD,CAAX;;AACA,eAAI,IAAIhC,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACiE,QAAQ,CAACM,cAAT,CAAwB1E,MAAvC,EAA+CG,CAAC,EAAhD,EAAmD;AACjD,gBAAGiE,QAAQ,CAACM,cAAT,CAAwBvE,CAAxB,EAA2B0E,QAA3B,KAAwC7D,QAA3C,EAAqDc,WAAW,CAACsC,QAAQ,CAACM,cAAT,CAAwBvE,CAAxB,EAA2B2E,MAA5B,CAAX;AACtD;AACF;AACF,OA5BH,EA6BGC,KA7BH,CA6BSC,KAAK,IAAI;AACdC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,OA/BH;AAgCD,KA3Ca,CA6Cd;AACA;AACA;AACA;AACA;AACA;;;AACAnH,IAAAA,KAAK,CAAC6F,GAAN,CAAU,qCAAV,EACGC,IADH,CACQC,QAAQ,IAAI;AAChB,YAAMqB,OAAO,GAAGrB,QAAQ,CAACE,IAAT,CAAcC,MAAd,CAAqBU,CAAC,IAAIA,CAAC,CAACS,IAAF,KAAWrE,QAArC,CAAhB;AACAqD,MAAAA,OAAO,CAACC,GAAR,CAAYc,OAAO,CAAC,CAAD,CAAnB;AACA,UAAGA,OAAO,CAACpF,MAAR,KAAmB,CAAtB,EAAyBiF,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACzBzD,MAAAA,cAAc,CAAC0D,OAAO,CAAC,CAAD,CAAR,CAAd;AACA,YAAME,IAAI,GAAGvB,QAAQ,CAACE,IAAT,CAAcC,MAAd,CAAqBU,CAAC,IAAIA,CAAC,CAACW,QAAF,IAAcH,OAAO,CAAC,CAAD,CAAP,CAAWG,QAAnD,CAAb;AACAtD,MAAAA,cAAc,CAACqD,IAAD,CAAd,CANgB,CAQhB;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KAvBH,EAwBGP,KAxBH,CAwBSC,KAAK,IAAI;AACdC,MAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,KA1BH,EAnDc,CA+Ed;AACA;AACA;AACD,GAlFQ,CAAT;;AAoFA,QAAMK,QAAQ,GAAG,YAAY;AAC3B,QAAIC,IAAI,GAAG,IAAX;AACApD,IAAAA,UAAU,CAAC,KAAD,CAAV;AAEA,UAAMqD,IAAI,GAAG,MAAMvG,OAAO,CAACJ,KAAK,CAACL,UAAU,CAACqB,EAAD,EAAK,WAAL,CAAX,EAA8Bf,KAAK,CAAC,UAAD,EAAa,oBAAb,EAAmCyC,YAAY,CAAC8D,QAAhD,CAAnC,EAA8FnG,OAAO,CAAC,YAAD,EAAe,MAAf,CAArG,EAA6HR,UAAU,CAAC4D,IAAD,CAAvI,EAA+InD,KAAK,CAAC,EAAD,CAApJ,CAAN,CAA1B;AACA,QAAIiG,IAAI,GAAG,EAAX;AACA,UAAMK,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,IAAL,CAAUC,GAAV,CAAc,MAAM5G,GAAN,IAAa;AAC3CoG,MAAAA,IAAI,CAAClF,IAAL,CAAUlB,GAAG,CAAC+E,IAAJ,EAAV;;AACA,UAAG/E,GAAG,KAAKoD,GAAR,IAAegD,IAAI,CAACtF,MAAL,KAAgB,EAAlC,EAAsC;AACpC,YAAGd,GAAG,KAAKoD,GAAX,EAAgBmD,IAAI,GAAG,KAAP;AAChBhD,QAAAA,OAAO,CAACvD,GAAD,CAAP;AACD;AACF,KANiB,CAAZ,EAMF4E,IANE,CAMG,MAAM7B,cAAc,CAACD,WAAW,CAAC+D,MAAZ,CAAmBT,IAAnB,CAAD,CANvB,CAAN;AAQA,QAAGG,IAAH,EAASpD,UAAU,CAAC,IAAD,CAAV,CAAT,KACKA,UAAU,CAAC,KAAD,CAAV;AACN,GAhBD;;AAkBA,QAAM2D,QAAQ,GAAG,MAAOC,GAAP,IAAe;AAC9B,UAAMzC,UAAU,GAAGyC,GAAnB;AAEA,QAAIjF,QAAQ,GAAGS,YAAY,CAAC4D,IAA5B;AACA,QAAIxD,SAAS,GAAGJ,YAAY,CAACyB,OAAb,CAAqBM,UAArB,EAAiCL,WAAjD;AACArB,IAAAA,WAAW,CAACD,SAAD,CAAX;AACAM,IAAAA,WAAW,CAAC,IAAD,CAAX;AAEA,QAAI+D,IAAI,GAAGC,MAAM,CAACC,MAAP,CAAc3E,YAAd,CAAX;AAEAyE,IAAAA,IAAI,CAAChD,OAAL,CAAaM,UAAb,EAAyB6C,KAAzB,GAA+BC,QAAQ,CAACJ,IAAI,CAAChD,OAAL,CAAaM,UAAb,EAAyB6C,KAA1B,EAAiC,EAAjC,CAAR,GAA6C,CAA5E;AAEA3E,IAAAA,cAAc,CAACwE,IAAI,CAACK,SAAN,CAAd;AAEA,UAAM/H,SAAS,CAAC4E,WAAD,EAAc;AAC3BF,MAAAA,OAAO,EAAEgD,IAAI,CAAChD,OADa;AAE3BsD,MAAAA,SAAS,EAAE/H,SAAS,CAAC,CAAD,CAFO;AAG3BgI,MAAAA,WAAW,EAAE3H,UAAU,CAAC+B,GAAD;AAHI,KAAd,CAAf;AAMA,UAAMrC,SAAS,CAAC6E,OAAD,EAAU;AACvBqB,MAAAA,cAAc,EAAE5F,UAAU,CAAC;AAAE+F,QAAAA,QAAQ,EAAE7D,QAAZ;AAAsB8D,QAAAA,MAAM,EAAEjD;AAA9B,OAAD;AADH,KAAV,CAAf;AAGD,GAvBD;;AAyBA,QAAM6E,QAAQ,GAAG,YAAY;AAC3B,QAAG/E,MAAH,EAAU;AACRC,MAAAA,SAAS,CAAC,KAAD,CAAT;AACA,YAAMpD,SAAS,CAAC6E,OAAD,EAAU;AACvBkB,QAAAA,cAAc,EAAE1F,WAAW,CAAC4C,YAAY,CAAC4D,IAAd;AADJ,OAAV,CAAf;AAGA,YAAM7G,SAAS,CAAC4E,WAAD,EAAc;AAC3BuD,QAAAA,KAAK,EAAElI,SAAS,CAAC,CAAC,CAAF;AADW,OAAd,CAAf;AAGAiD,MAAAA,cAAc,CAAC,EAAE,GAAGD,YAAL;AAAmBkF,QAAAA,KAAK,EAAElF,YAAY,CAACkF,KAAb,GAAmB;AAA7C,OAAD,CAAd;AACD,KATD,MASK;AACH/E,MAAAA,SAAS,CAAC,IAAD,CAAT;AACA,YAAMpD,SAAS,CAAC6E,OAAD,EAAU;AACvBkB,QAAAA,cAAc,EAAEzF,UAAU,CAAC2C,YAAY,CAAC4D,IAAd;AADH,OAAV,CAAf;AAGA,YAAM7G,SAAS,CAAC4E,WAAD,EAAc;AAC3BuD,QAAAA,KAAK,EAAElI,SAAS,CAAC,CAAD;AADW,OAAd,CAAf;AAGAiD,MAAAA,cAAc,CAAC,EAAE,GAAGD,YAAL;AAAmBkF,QAAAA,KAAK,EAAElF,YAAY,CAACkF,KAAb,GAAmB;AAA7C,OAAD,CAAd;AACD;AACF,GApBD;;AAsBA,QAAMC,QAAQ,GAAG,YAAY;AAC3B,UAAMjI,SAAS,CAACyE,WAAD,CAAf;AACA,UAAM5E,SAAS,CAAC6E,OAAD,EAAU;AACvBoB,MAAAA,gBAAgB,EAAE5F,WAAW,CAAC4C,YAAY,CAAC4D,IAAd;AADN,KAAV,CAAf;AAIAJ,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD,GAPD;;AASA,QAAM0B,OAAO,GAAG,MAAM;AACpBzF,IAAAA,eAAe,CAAC,KAAD,CAAf;AACD,GAFD;;AAKA,MAAGK,YAAH,EAAgB;AACd,QAAIyE,IAAI,GAACY,KAAK,CAACC,IAAN,CAAWtF,YAAY,CAACyB,OAAxB,CAAT;AACAgD,IAAAA,IAAI,CAACc,IAAL,CAAU,UAASC,KAAT,EAAgBC,MAAhB,EAAuB;AAC/B,UAAID,KAAK,CAACZ,KAAN,GAAca,MAAM,CAACb,KAAzB,EAA+B;AAC7B,eAAO,CAAC,CAAR;AACD,OAFD,MAEM,IAAIY,KAAK,CAACZ,KAAN,GAAca,MAAM,CAACb,KAAzB,EAA+B;AACnC,eAAO,CAAP;AACD,OAFK,MAED;AACH,eAAO,CAAP;AACD;AACF,KARD;AASAtE,IAAAA,aAAa,GAAGmE,IAAhB;;AAEA,SAAI,IAAI/F,CAAC,GAAC,CAAV,EAAaA,CAAC,GAAC+F,IAAI,CAAClG,MAApB,EAA6BG,CAAC,EAA9B,EAAiC;AAC/B2C,MAAAA,CAAC,CAAC1C,IAAF,CAAO8F,IAAI,CAAC/F,CAAD,CAAJ,CAAQgD,WAAf;AACAJ,MAAAA,CAAC,CAAC3C,IAAF,CAAO8F,IAAI,CAAC/F,CAAD,CAAJ,CAAQkG,KAAf;AACD;;AAED,QAAIc,IAAI,GAAG1F,YAAY,CAAC2F,UAAxB;AACA,QAAIC,OAAO,GAAGf,QAAQ,CAACa,IAAI,CAACG,KAAL,CAAW,CAAC,CAAZ,CAAD,CAAtB;;AACA,QAAGvE,CAAC,KAAK,EAAT,EAAY;AACVA,MAAAA,CAAC,CAACwE,OAAF,CAAU,CAACC,KAAD,EAAQvB,GAAR,KAAgB;AACxBjD,QAAAA,CAAC,CAAC5C,IAAF,CAAO,UAAS,CAAC6F,GAAG,GAACoB,OAAL,IAAc,EAAvB,GAA2B,aAAlC;AACD,OAFD;AAGD;AACF;;AAED,sBACE,QAAC,QAAD;AAAA,4BACE,QAAC,MAAD;AACE,MAAA,KAAK,EAAI3E,MAAM,IAAIjB,YAAY,CAACgG,KADlC;AAEE,MAAA,IAAI,EAAE,CACJ;AAAEC,QAAAA,IAAI,EAAE,aAAR;AAAuBzE,QAAAA,OAAO,EAAE;AAAEA,UAAAA;AAAF;AAAhC,OADI;AAFR;AAAA;AAAA;AAAA;AAAA,YADF,eAOE;AAAK,MAAA,SAAS,EAAEN,MAAM,CAACgF,UAAvB;AAAA,8BAEE;AAAK,QAAA,SAAS,EAAEhF,MAAM,CAACiF,aAAvB;AAAA,gCAEE;AAAA,iCACE;AAAG,YAAA,SAAS,EAAEjF,MAAM,CAAC4C,QAArB;AAAA,oCAA+B;AAAM,cAAA,SAAS,EAAC;AAAhB;AAAA;AAAA;AAAA;AAAA,oBAA/B,eAEG7C,MAAM,iBACL,QAAC,QAAD;AAAA,wBACGjB,YAAY,CAAC8D,QAAb,CAAsBO,GAAtB,CAA0B,CAAC+B,IAAD,EAAO5B,GAAP,KAAe;AACxC,oBAAKA,GAAG,KAAK,CAAb,EAAe;AACb,sCAAQ;AAAG,oBAAA,SAAS,EAAC,cAAb;AAA4B,oBAAA,IAAI,EAAE,eAAa4B,IAA/C;AAAA,oCAAuDA,IAAvD;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAR;AACD,iBAFD,MAEK;AACH,sCAAQ;AAAG,oBAAA,SAAS,EAAC,cAAb;AAA4B,oBAAA,IAAI,EAAE,eAAaA,IAA/C;AAAA,qCAAwDA,IAAxD;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAR;AACD;AACF,eANA;AADH;AAAA;AAAA;AAAA;AAAA,oBAHJ,EAaG,CAACnF,MAAD,iBAAW,QAAC,QAAD;AAAU,cAAA,KAAK,EAAE;AAAEiB,gBAAAA,UAAU,EAAE;AAAd,eAAjB;AAAqC,cAAA,KAAK,EAAE;AAA5C;AAAA;AAAA;AAAA;AAAA,oBAbd;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF,EAqBGxC,YAAY,iBAAK,QAAC,WAAD;AAAa,UAAA,OAAO,EAAE0F,OAAtB;AAA+B,UAAA,QAAQ,EAAED;AAAzC;AAAA;AAAA;AAAA;AAAA,gBArBpB,eAwBE;AAAI,UAAA,SAAS,EAAEjE,MAAM,CAAC8E,KAAtB;AAAA,oBAA8B/E,MAAM,GAAEjB,YAAY,CAACgG,KAAf,gBAAuB,QAAC,aAAD;AAAe,YAAA,KAAK,EAAC,OAArB;AAA6B,YAAA,cAAc,EAAC,SAA5C;AAAA,mCAAsD,QAAC,QAAD;AAAU,cAAA,QAAQ,EAAE,CAApB;AAAuB,cAAA,KAAK,EAAE,OAAO5E,YAAY,GAAC,GAAlD;AAAuD,cAAA,MAAM,EAAE;AAA/D;AAAA;AAAA;AAAA;AAAA;AAAtD;AAAA;AAAA;AAAA;AAAA;AAA3D;AAAA;AAAA;AAAA;AAAA,gBAxBF,eAyBE;AAAG,UAAA,SAAS,EAAEF,MAAM,CAACmF,IAArB;AAAA,oBACGpF,MAAM,GAAGjB,YAAY,CAACsG,UAAhB,gBAA6B,QAAC,aAAD;AAAe,YAAA,KAAK,EAAC,OAArB;AAA6B,YAAA,cAAc,EAAC,SAA5C;AAAA,mCAAsD,QAAC,QAAD;AAAU,cAAA,QAAQ,EAAE,CAApB;AAAuB,cAAA,KAAK,EAAC,OAA7B;AAAqC,cAAA,KAAK,EAAE,GAA5C;AAAiD,cAAA,MAAM,EAAE;AAAzD;AAAA;AAAA;AAAA;AAAA;AAAtD;AAAA;AAAA;AAAA;AAAA;AADtC;AAAA;AAAA;AAAA;AAAA,gBAzBF,eA6BE;AAAK,UAAA,KAAK,EAAE;AAAEC,YAAAA,YAAY,EAAE;AAAhB,WAAZ;AAAA,kCACE;AAAG,YAAA,KAAK,EAAE;AAAEC,cAAAA,WAAW,EAAE,EAAf;AAAmBC,cAAAA,KAAK,EAAE,SAA1B;AAAqCC,cAAAA,OAAO,EAAE,MAA9C;AAAsDC,cAAAA,MAAM,EAAE;AAA9D,aAAV;AAAkF,YAAA,SAAS,EAAC,KAA5F;AAAkG,YAAA,GAAG,EAAC,YAAtG;AAAmH,YAAA,IAAI,EAAE1F,MAAM,IAAI,6DAA2DjB,YAAY,CAAC4D,IAAxE,GAA6E,SAA7E,GAAuF5D,YAAY,CAACgG,KAAvO;AAA8O,YAAA,MAAM,EAAC,QAArP;AAA8P,2BAAY,SAA1Q;AAAoR,YAAA,KAAK,EAAC,OAA1R;AAAA,mCAAkS,QAAC,WAAD;AAAa,cAAA,KAAK,EAAE;AAAEY,gBAAAA,QAAQ,EAAExF,YAAY,IAAI;AAA5B;AAApB;AAAA;AAAA;AAAA;AAAA;AAAlS;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAG,YAAA,KAAK,EAAE;AAAEqF,cAAAA,KAAK,EAAE,SAAT;AAAoBC,cAAAA,OAAO,EAAE,MAA7B;AAAqCC,cAAAA,MAAM,EAAE;AAA7C,aAAV;AAAiE,YAAA,GAAG,EAAC,YAArE;AAAkF,YAAA,IAAI,EAAE1F,MAAM,IAAI,oEAAkEjB,YAAY,CAAC4D,IAAjL;AAAuL,YAAA,MAAM,EAAC,QAA9L;AAAuM,2BAAY,SAAnN;AAA6N,YAAA,KAAK,EAAC,OAAnO;AAAA,mCAA2O,QAAC,YAAD;AAAc,cAAA,KAAK,EAAE;AAAEgD,gBAAAA,QAAQ,EAAExF,YAAY,IAAI;AAA5B;AAArB;AAAA;AAAA;AAAA;AAAA;AAA3O;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBA7BF,EAkCGX,QAAQ,IAAIQ,MAAZ,iBACC;AAAA,iCACE;AAAG,YAAA,SAAS,EAAEC,MAAM,CAACd,SAArB;AAAA,8CAAoDA,SAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAnCJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EA6CG,CAACK,QAAD,iBACC;AAAK,QAAA,KAAK,EAAE;AAAE0B,UAAAA,SAAS,EAAE;AAAb,SAAZ;AAAA,mBACGlB,MAAM,iBACL,QAAC,QAAD;AAAA,oBACGjB,YAAY,CAACyB,OAAb,CAAqB4C,GAArB,CAAyB,CAACwC,MAAD,EAASrC,GAAT,kBACxB;AAAK,YAAA,SAAS,EAAEtD,MAAM,CAAC4F,YAAvB;AAAA,mCACE,QAAC,YAAD;AAAc,cAAA,OAAO,EAAC,UAAtB;AAAiC,cAAA,KAAK,EAAC,SAAvC;AAAiD,cAAA,OAAO,EAAE,MAAMvC,QAAQ,CAACC,GAAD,CAAxE;AAAA,wBAAiFqC,MAAM,CAACnF;AAAxF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADD;AADH;AAAA;AAAA;AAAA;AAAA,gBAFJ,EAUG,CAACT,MAAD,IAAW,CAACgB,cAAD,CAVd,EAWGJ,OAAO,KAAK,IAAZ,iBAAqB;AAAG,UAAA,SAAS,EAAEX,MAAM,CAACW,OAArB;AAAA,oBAA+BA;AAA/B;AAAA;AAAA;AAAA;AAAA,gBAXxB,EAaGZ,MAAM,iBACL;AAAK,UAAA,SAAS,EAAEC,MAAM,CAAC6F,UAAvB;AAAA,iCACE;AAAK,YAAA,SAAS,EAAE7F,MAAM,CAAC8F,cAAvB;AAAA,mCACE,QAAC,IAAD;AACE,cAAA,KAAK,EAAE,CADT;AAEE,cAAA,IAAI,EAAC,sBAFP;AAGE,cAAA,MAAM,EAAC,gBAHT;AAIE,cAAA,YAAY,EAAE;AAJhB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA,cA9CJ,EA4EGvG,QAAQ,IAAIQ,MAAZ,iBACC,QAAC,QAAD;AAAA,gCACE;AAAK,UAAA,SAAS,EAAEC,MAAM,CAAC+F,KAAvB;AAAA,iCACE;AAAO,YAAA,SAAS,EAAC,OAAjB;AAAyB,YAAA,KAAK,EAAE;AAAEC,cAAAA,MAAM,EAAE;AAAV,aAAhC;AAAA,oCACE;AAAA,qCACE;AAAA,wCACE;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAQE;AAAA,wBACG5G,aAAa,CAAC+D,GAAd,CAAkB,CAACwC,MAAD,EAASrC,GAAT,kBACjB;AAAI,gBAAA,KAAK,EAAE;AAAE2C,kBAAAA,eAAe,EAAE5F,CAAC,CAACiD,GAAD;AAApB,iBAAX;AAAA,wCACE;AAAI,kBAAA,KAAK,EAAC,KAAV;AAAA,yCAA6BA,GAAG,GAAC,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,4BAAMqC,MAAM,CAACnF;AAAb;AAAA;AAAA;AAAA;AAAA,wBAFF,eAGE;AAAA,4BAAKmF,MAAM,CAACjC;AAAZ;AAAA;AAAA;AAAA;AAAA,wBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADD;AADH;AAAA;AAAA;AAAA;AAAA,oBARF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAsBE;AAAK,UAAA,SAAS,EAAE1D,MAAM,CAACkG,MAAvB;AAAA,kCACE;AAAK,YAAA,SAAS,EAAElG,MAAM,CAACmG,QAAvB;AAAA,mCAAiC,QAAC,QAAD;AAAU,cAAA,QAAQ,EAAE,CAACpG,MAArB;AAA6B,cAAA,KAAK,EAAEG,YAApC;AAAkD,cAAA,MAAM,EAAEC,CAA1D;AAA6D,cAAA,MAAM,EAAEC,CAArE;AAAwE,cAAA,MAAM,EAAEC;AAAhF;AAAA;AAAA;AAAA;AAAA;AAAjC;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAK,YAAA,SAAS,EAAEL,MAAM,CAACoG,QAAvB;AAAA,mCAAiC,QAAC,QAAD;AAAU,cAAA,QAAQ,EAAE,CAACrG,MAArB;AAA6B,cAAA,KAAK,EAAEG,YAApC;AAAkD,cAAA,MAAM,EAAEC,CAA1D;AAA6D,cAAA,MAAM,EAAEC,CAArE;AAAwE,cAAA,MAAM,EAAEC;AAAhF;AAAA;AAAA;AAAA;AAAA;AAAjC;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAtBF;AAAA;AAAA;AAAA;AAAA;AAAA,cA7EJ,EA0GGN,MAAM,iBACL,QAAC,QAAD;AAAA,gCAEE;AAAK,UAAA,SAAS,EAAEC,MAAM,CAACqG,UAAvB;AAAmC,UAAA,KAAK,EAAE;AAAEpF,YAAAA,SAAS,EAAE,MAAM1B,QAAQ,GAAC;AAA5B,WAA1C;AAAA,iCACE,QAAC,aAAD;AAAe,YAAA,KAAK,EAAE7B,KAAtB;AAAA,mCACE,QAAC,WAAD;AAAa,cAAA,IAAI,EAAEwC,YAAY,GAAG,OAAH,GAAa,SAA5C;AAAuD,cAAA,OAAO,EAAC,WAA/D;AAAA,yBACG,CAAClB,MAAD,iBAAW,QAAC,MAAD;AAAQ,gBAAA,OAAO,EAAE+E,QAAjB;AAA2B,gBAAA,SAAS,eAAE,QAAC,YAAD;AAAc,kBAAA,QAAQ,EAAC;AAAvB;AAAA;AAAA;AAAA;AAAA,wBAAtC;AAAwE,gBAAA,KAAK,EAAC,SAA9E;AAAwF,gBAAA,KAAK,EAAE;AAAE2B,kBAAAA,QAAQ,EAAE;AAAZ,iBAA/F;AAAA,0BAAkH3F,MAAM,GAAGjB,YAAY,CAACkF,KAAhB,GAAwB;AAAhJ;AAAA;AAAA;AAAA;AAAA,sBADd,EAEGhF,MAAM,iBAAI,QAAC,MAAD;AAAQ,gBAAA,OAAO,EAAE+E,QAAjB;AAA2B,gBAAA,SAAS,eAAE,QAAC,YAAD;AAAc,kBAAA,KAAK,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA,wBAAtC;AAA0E,gBAAA,KAAK,EAAC,SAAhF;AAA0F,gBAAA,KAAK,EAAE;AAAE2B,kBAAAA,QAAQ,EAAE;AAAZ,iBAAjG;AAAA,0BAAqH3F,MAAM,GAAGjB,YAAY,CAACkF,KAAhB,GAAwB;AAAnJ;AAAA;AAAA;AAAA;AAAA,sBAFb,EAGGpF,MAAM,iBAAI,QAAC,MAAD;AAAQ,gBAAA,OAAO,EAAE,MAAMH,eAAe,CAAC,IAAD,CAAtC;AAA8C,gBAAA,SAAS,eAAE,QAAC,UAAD;AAAY,kBAAA,QAAQ,EAAC;AAArB;AAAA;AAAA;AAAA;AAAA,wBAAzD;AAA0F,gBAAA,KAAK,EAAE;AAAEiH,kBAAAA,QAAQ,EAAE;AAAZ,iBAAjG;AAAmH,gBAAA,KAAK,EAAC,WAAzH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAFF,EAaGnG,QAAQ,iBACP;AAAA,kCACE;AAAI,YAAA,SAAS,EAAES,MAAM,CAACsG,OAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAK,YAAA,SAAS,EAAEtG,MAAM,CAACuG,eAAvB;AAAA,oCACE,QAAC,cAAD;AACE,cAAA,QAAQ,EAAE1D,QADZ;AAEE,cAAA,OAAO,EAAEpD,OAFX;AAGE,cAAA,SAAS,EAAE,GAHb;AAIE,cAAA,MAAM,eAAE;AAAA;AAAA;AAAA;AAAA,sBAJV;AAAA,wBAMGJ,WAAW,CAAChC,MAAZ,KAAuB,CAAvB,iBAA4B,QAAC,YAAD;AAAc,gBAAA,SAAS,EAAEgC;AAAzB;AAAA;AAAA;AAAA;AAAA;AAN/B;AAAA;AAAA;AAAA;AAAA,oBADF,EAUGA,WAAW,CAAChC,MAAZ,KAAuB,CAAvB,iBAA4B,QAAC,eAAD;AAAiB,cAAA,KAAK,EAAE;AAAEmJ,gBAAAA,QAAQ,EAAE,UAAZ;AAAwBvF,gBAAAA,SAAS,EAAE,EAAnC;AAAuCD,gBAAAA,UAAU,EAAE;AAAnD,eAAxB;AAAiF,cAAA,KAAK,EAAC,kBAAvF;AAA0G,cAAA,KAAK,EAAE,GAAjH;AAAsH,cAAA,IAAI,EAAC;AAA3H;AAAA;AAAA;AAAA;AAAA,oBAV/B;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAdJ;AAAA;AAAA;AAAA;AAAA;AAAA,cA3GJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAPF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAsJD;;GA/XuBhD,c;UAmBPiC,S,EACMhF,a;;;KApBC+C,c;AAiYxB,MAAMiC,SAAS,GAAG1F,UAAU,CAAC,MAAMC,YAAY,CAAC;AAC9CiM,EAAAA,YAAY,EAAE,EADgC;AAI9CX,EAAAA,cAAc,EAAE;AACdJ,IAAAA,QAAQ,EAAE,EADI;AAEdzE,IAAAA,SAAS,EAAE,EAFG;AAGdyF,IAAAA,UAAU,EAAE,oBAHE;AAIdC,IAAAA,SAAS,EAAE,QAJG;AAKdC,IAAAA,UAAU,EAAE,GALE;AAMdC,IAAAA,aAAa,EAAE,OAND;AAOdtB,IAAAA,KAAK,EAAE,kBAPO;AAQduB,IAAAA,UAAU,EAAE,0BARE,CASd;;AATc,GAJ8B;AAe9ClE,EAAAA,QAAQ,EAAE;AACR8D,IAAAA,UAAU,EAAE,qBADJ;AAERC,IAAAA,SAAS,EAAE,QAFH;AAGRC,IAAAA,UAAU,EAAE,GAHJ;AAIRlB,IAAAA,QAAQ,EAAE;AAJF,GAfoC;AAqB9CZ,EAAAA,KAAK,EAAE;AACL4B,IAAAA,UAAU,EAAE,qBADP;AAELC,IAAAA,SAAS,EAAE,QAFN;AAGLC,IAAAA,UAAU,EAAE,GAHP;AAILlB,IAAAA,QAAQ,EAAE;AAJL,GArBuC;AA2B9CY,EAAAA,OAAO,EAAE;AACPrF,IAAAA,SAAS,EAAE,EADJ;AAEPoE,IAAAA,YAAY,EAAE,EAFP;AAGPqB,IAAAA,UAAU,EAAE,yBAHL;AAIPC,IAAAA,SAAS,EAAE,QAJJ;AAKPC,IAAAA,UAAU,EAAE;AALL,GA3BqC;AAkC9CL,EAAAA,eAAe,EAAE;AACfQ,IAAAA,KAAK,EAAE;AADQ,GAlC6B;AAqC9ChB,EAAAA,KAAK,EAAE;AACLxE,IAAAA,MAAM,EAAE,mDADH;AAELyF,IAAAA,YAAY,EAAE,EAFT;AAGL/F,IAAAA,SAAS,EAAE,EAHN;AAILoE,IAAAA,YAAY,EAAE,EAJT;AAKLY,IAAAA,eAAe,EAAE,OALZ;AAMLc,IAAAA,KAAK,EAAE;AANF,GArCuC;AA6C9Cb,EAAAA,MAAM,EAAE;AACNe,IAAAA,OAAO,EAAE,MADH;AAENF,IAAAA,KAAK,EAAE,MAFD;AAGN1B,IAAAA,YAAY,EAAE;AAHR,GA7CsC;AAkD9Cc,EAAAA,QAAQ,EAAE;AACR5E,IAAAA,MAAM,EAAE,mDADA;AAERyF,IAAAA,YAAY,EAAE,EAFN;AAGRE,IAAAA,OAAO,EAAE,EAHD;AAIRH,IAAAA,KAAK,EAAE,KAJC;AAKRd,IAAAA,eAAe,EAAE,OALT;AAMRkB,IAAAA,MAAM,EAAE,GANA;AAOR7B,IAAAA,WAAW,EAAE;AAPL,GAlDoC;AA2D9Cc,EAAAA,QAAQ,EAAE;AACR7E,IAAAA,MAAM,EAAE,mDADA;AAERyF,IAAAA,YAAY,EAAE,EAFN;AAGRE,IAAAA,OAAO,EAAE,EAHD;AAIRH,IAAAA,KAAK,EAAE,KAJC;AAKRd,IAAAA,eAAe,EAAE,OALT;AAMRkB,IAAAA,MAAM,EAAE;AANA,GA3DoC;AAmE9CjI,EAAAA,SAAS,EAAE;AACTqG,IAAAA,KAAK,EAAE,aADE;AAETG,IAAAA,QAAQ,EAAE;AAFD,GAnEmC;AAuE9CV,EAAAA,UAAU,EAAE;AACVoC,IAAAA,UAAU,EAAE,EADF;AAEVL,IAAAA,KAAK,EAAE,MAFG;AAGVM,IAAAA,aAAa,EAAE;AAHL,GAvEkC;AA4E9ClC,EAAAA,IAAI,EAAE;AACJnE,IAAAA,UAAU,EAAE,EADR;AAEJ0F,IAAAA,UAAU,EAAE,gBAFR;AAGJhB,IAAAA,QAAQ,EAAE,EAHN;AAIJH,IAAAA,KAAK,EAAE;AAJH,GA5EwC;AAmF9C;AAEA1E,EAAAA,UAAU,EAAE;AACVG,IAAAA,UAAU,EAAE;AADF,GArFkC;AAwF9C4E,EAAAA,YAAY,EAAE;AACZ5E,IAAAA,UAAU,EAAE,EADA;AAEZqE,IAAAA,YAAY,EAAE,CAFF;AAGZK,IAAAA,QAAQ,EAAE;AAHE,GAxFgC;AA6F9CG,EAAAA,UAAU,EAAE;AACV5E,IAAAA,SAAS,EAAE,EADD;AAEVD,IAAAA,UAAU,EAAE;AAFF,GA7FkC;AAiG9CsG,EAAAA,OAAO,EAAE;AACPN,IAAAA,YAAY,EAAE;AADP,GAjGqC;AAqG9CrG,EAAAA,OAAO,EAAE;AACP4E,IAAAA,KAAK,EAAE,KADA;AAEPG,IAAAA,QAAQ,EAAE,EAFH;AAGPM,IAAAA,MAAM,EAAE,kBAHD;AAIPkB,IAAAA,OAAO,EAAE;AAJF,GArGqC;AA4G9C,+BAA6B;AAC3B/B,IAAAA,IAAI,EAAE;AACJE,MAAAA,YAAY,EAAE;AADV,KADqB;AAI3BnG,IAAAA,SAAS,EAAE;AACTwG,MAAAA,QAAQ,EAAE,EADD;AAETL,MAAAA,YAAY,EAAE;AAFL,KAJgB;AAQ3BzC,IAAAA,QAAQ,EAAE;AACR8C,MAAAA,QAAQ,EAAE;AADF,KARiB;AAW3BZ,IAAAA,KAAK,EAAE;AACLY,MAAAA,QAAQ,EAAE,EADL;AAELzE,MAAAA,SAAS,EAAE;AAFN,KAXoB;AAe3BqF,IAAAA,OAAO,EAAE;AACPN,MAAAA,MAAM,EAAE,mBADD;AAEPN,MAAAA,QAAQ,EAAE;AAFH,KAfkB;AAmB3BW,IAAAA,UAAU,EAAE;AACVrF,MAAAA,UAAU,EAAE;AADF,KAnBe;AAsB3BiE,IAAAA,aAAa,EAAE;AACbsC,MAAAA,WAAW,EAAE,EADA,CAEb;;AAFa,KAtBY;AA0B3BxB,IAAAA,KAAK,EAAE;AACLxE,MAAAA,MAAM,EAAE,mDADH;AAELN,MAAAA,SAAS,EAAE,EAFN;AAGLoE,MAAAA,YAAY,EAAE;AAHT,KA1BoB;AA+B3Bc,IAAAA,QAAQ,EAAE;AACR5E,MAAAA,MAAM,EAAE,mDADA;AAER4F,MAAAA,MAAM,EAAE,GAFA;AAGR9B,MAAAA,YAAY,EAAE,CAHN;AAIR2B,MAAAA,YAAY,EAAE,CAJN;AAKRE,MAAAA,OAAO,EAAE,CALD;AAMR5B,MAAAA,WAAW,EAAE;AANL,KA/BiB;AAuC3Bc,IAAAA,QAAQ,EAAE;AACR7E,MAAAA,MAAM,EAAE,mDADA;AAER4F,MAAAA,MAAM,EAAE,GAFA;AAGR9B,MAAAA,YAAY,EAAE,CAHN;AAIR2B,MAAAA,YAAY,EAAE,CAJN;AAKRE,MAAAA,OAAO,EAAE;AALD,KAvCiB;AA8C3BX,IAAAA,eAAe,EAAE;AACfQ,MAAAA,KAAK,EAAE;AADQ,KA9CU;AAiD3BlB,IAAAA,UAAU,EAAE;AACV7E,MAAAA,UAAU,EAAE,EADF,CACQ;;AADR,KAjDe;AAoD3B8E,IAAAA,cAAc,EAAE;AACd9E,MAAAA,UAAU,EAAE;AADE,KApDW;AAuD3B4E,IAAAA,YAAY,EAAE;AACZ5E,MAAAA,UAAU,EAAE;AADA;AAvDa;AA5GiB,CAAD,CAAnB,CAA5B;AA0KA,MAAMwG,YAAY,GAAG7M,UAAU,CAAC;AAC9B8M,EAAAA,IAAI,EAAE;AACJC,IAAAA,WAAW,EAAE,kBADT;AAEJnC,IAAAA,KAAK,EAAE,kBAFH;AAGJG,IAAAA,QAAQ,EAAE,EAHN;AAIJsB,IAAAA,YAAY,EAAE,EAJV;AAKJD,IAAAA,KAAK,EAAEY,IAAI,CAACC,GAAL,CAAS,GAAT,EAActF,MAAM,CAACuF,UAAP,GAAkB,GAAhC,CALH;AAMJC,IAAAA,aAAa,EAAE;AANX;AADwB,CAAD,CAAV,CASlB3N,MATkB,CAArB","sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport { createMuiTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport Skeleton, { SkeletonTheme } from 'react-loading-skeleton';\nimport { WindMillLoading } from 'react-loadingg';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { Helmet } from \"react-helmet\";\nimport { Wave } from \"react-animated-text\";\nimport InfiniteScroll  from \"react-infinite-scroller\"\nimport axios from \"axios\";\n\nimport QuestionList from '../components/QuestionList';\nimport ModalDelete from '../components/ModalDelete';\nimport PieChart from '../components/PieChart';\nimport BarChart from '../components/BarChart';\n\n// Firebase\nimport { getApps, initializeApp } from 'firebase/app';\nimport { getFirestore, updateDoc, increment, collection, deleteDoc, startAfter, arrayRemove, arrayUnion, query, \n      where, getDoc, doc, getDocs, orderBy, limit } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyArjDv3hS4_rw1YyNz-JFXDX1ufF72bqr8\",\n  authDomain: \"chooseone-105a9.firebaseapp.com\",\n  databaseURL: \"https://chooseone-default-rtdb.firebaseio.com\",\n  projectId: \"chooseone\",\n  storageBucket: \"chooseone.appspot.com\",\n  messagingSenderId: \"722704825746\",\n  appId: \"1:722704825746:web:73f11551b9e59f4bc2d54b\",\n  measurementId: \"G-YJ97DZH6V5\"\n};\nvar db = '';\nif (!getApps().length){ \n  const firebaseApp = initializeApp(firebaseConfig);\n  db = getFirestore(firebaseApp);\n}else{\n  db = getFirestore();\n}\n\nvar tabColors = ['#ff69b4']\nfor(var i=1; i<11; i++) tabColors.push('hsla('+(i*100)+', 75%, 55%, 1)');\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: 'rgb(3, 122, 255)',\n    },\n    secondary: {\n      main: '#f50057',\n    },\n    green: {\n      main: 'rgb(40, 168, 69)',\n    }\n  },\n});\n\nexport default function QuestionDetail (props) {\n\n  const uid = localStorage.getItem('chooseoneUid');\n  const the_slug = props.match.params.the_slug;\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [user, setUser] = useState(null);\n  const [madeIt, setMadeIt] = useState(null);\n  const [the_question, setTheQuestion] = useState(null);\n  const [likeIt, setLikeIt] = useState(false);\n  const [your_vote, setYourVote] = useState(null);\n  var choicesSorted = [];\n  const [relatedQues, setRelatedQues] = useState([]);\n  const [answered, setAnswered] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [end, setEnd] = useState(null);\n  const [last, setLast] = useState(null);\n\n  const loaded = relatedQues.length !== 0;\n  const styles = useStyles();\n  const smallDisplay = useMediaQuery('(max-width:500px)');\n  var l = [];\n  var v = [];\n  var c = [];\n  var content = '';\n  if(the_question){\n    for(var i=0; i<the_question.choices.length; i++){\n      if(i) content += the_question.choices[i].choice_text;\n      else content += ' vs ' + the_question.choices[i].choice_text;\n    }\n  }\n\n  const questionRef = doc(db, 'questions', the_slug);\n  const userRef = user !== null ? doc(db, 'users', uid) : '';\n\n  // QuestionDetail\n  const [warning, setWarning] = useState(null);\n  const [the_choice, setTheChoice] = useState(null);\n  var choiceSkeleton = [];\n  for(var i=0; i<(5-smallDisplay*2); i++){\n    choiceSkeleton.push(<div style={{ marginLeft: 30, marginTop: 15 }}><SkeletonTheme Primarycolor=\"white\" highlightColor=\"#d3d3d3\"><Skeleton duration={2} color='white' width={100} height={15 - smallDisplay*5}/></SkeletonTheme></div>)\n  }\n\n  useEffect(() => {\n    if(uid === null || user !== null) return null;\n\n    if(user === null){\n      // const u = doc(db, 'users', uid);\n      // const promise = new Promise(function(resolve) {\n      //   resolve(getDoc(u));\n      // })\n      // promise.then((us) => {\n        // if(us.exists){var the_user = us.data();}\n\n      axios.get('http://127.0.0.1:8000/api/users')\n        .then(response => {\n          const users = response.data.filter(u => u.uid === uid);\n          const the_user = users[0]\n\n          console.log(response.data);\n          console.log();\n\n          setUser(the_user);\n\n          if (the_user.question_liked.includes(the_slug)){\n            setLikeIt(true);\n          }else{\n            setLikeIt(false);\n          }\n\n          if (the_user.question_created.includes(the_slug)){\n            setMadeIt(true);\n          }else{\n            setMadeIt(false);\n          }\n\n          if(the_user.question_voted.some((q) => q.question === the_slug)){\n            setAnswered(true);\n            for(var i=0; i<the_user.question_voted.length; i++){\n              if(the_user.question_voted[i].question === the_slug) setYourVote(the_user.question_voted[i].answer)\n            }\n          }\n        })\n        .catch(error => {\n          window.location.href = '/';\n        })\n    }\n\n    // const qu = doc(db, 'questions', the_slug);\n    // const promiseD = new Promise(function(resolve, reject) {\n    //   resolve(getDoc(qu));\n    // })\n    // promiseD.then((doc) => {\n    //   if(doc.exists){\n    axios.get('http://127.0.0.1:8000/api/questions')\n      .then(response => {\n        const the_que = response.data.filter(q => q.slug === the_slug);\n        console.log(the_que[0]);\n        if(the_que.length === 0) window.location.href = '/';\n        setTheQuestion(the_que[0]);\n        const ques = response.data.filter(q => q.category in the_que[0].category)\n        setRelatedQues(ques);\n\n        // const ques = query(collection(db, 'questions'), where('category', 'array-contains-any', t.category), orderBy('created_at', 'desc'), limit(10));\n        // const promiseDD = new Promise(function(resolve) {\n        //   resolve(getDocs(ques));\n        // })\n        \n        // promiseDD.then(qq => {\n        //   var questionSimilar = [];\n        //   Promise.all(qq.docs.map(async doc => {\n        //     questionSimilar.push(doc.data());\n        //     if(questionSimilar.length === 10) setLast(doc);\n        //   })).then(() => {\n        //     setRelatedQues(questionSimilar);\n        //   });\n        // })\n      })\n      .catch(error => {\n        window.location.href = '/';\n      })\n\n    // if(end === null){\n    //   setEnd(query(collection(db, 'questions'), orderBy('created_at', 'asc'), limit(1)));\n    // }\n  });\n\n  const loadMore = async () => {\n    var more = true;\n    setHasMore(false);\n\n    const next = await getDocs(query(collection(db, 'questions'), where('category', 'array-contains-any', the_question.category), orderBy('created_at', 'desc'), startAfter(last), limit(10)));\n    var ques = [];\n    await Promise.all(next.docs.map(async doc => {\n      ques.push(doc.data());\n      if(doc === end || ques.length === 10) {\n        if(doc === end) more = false;\n        setLast(doc);\n      }\n    })).then(() => setRelatedQues(relatedQues.concat(ques)));\n\n    if(more) setHasMore(true);\n    else setHasMore(false);\n  }\n\n  const onChoice = async (idx) => {\n    const the_choice = idx;\n\n    var the_slug = the_question.slug;\n    var your_vote = the_question.choices[the_choice].choice_text;\n    setYourVote(your_vote);\n    setAnswered(true);\n\n    var copy = Object.create(the_question);\n\n    copy.choices[the_choice].votes=parseInt(copy.choices[the_choice].votes, 10)+1;\n    \n    setTheQuestion(copy.__proto__);\n\n    await updateDoc(questionRef, {\n      choices: copy.choices,\n      all_votes: increment(1),\n      users_voted: arrayUnion(uid),\n    });\n\n    await updateDoc(userRef, {\n      question_voted: arrayUnion({ question: the_slug, answer: your_vote }),\n    })\n  }\n\n  const onLikeit = async () => {\n    if(likeIt){\n      setLikeIt(false);\n      await updateDoc(userRef, {\n        question_liked: arrayRemove(the_question.slug),\n      });\n      await updateDoc(questionRef, {\n        likes: increment(-1),\n      });\n      setTheQuestion({ ...the_question, likes: the_question.likes-1 });\n    }else{\n      setLikeIt(true);\n      await updateDoc(userRef, {\n        question_liked: arrayUnion(the_question.slug),\n      });\n      await updateDoc(questionRef, {\n        likes: increment(1),\n      });\n      setTheQuestion({ ...the_question, likes: the_question.likes+1 })\n    }\n  }\n\n  const onDelete = async () => {\n    await deleteDoc(questionRef);\n    await updateDoc(userRef, {\n      question_created: arrayRemove(the_question.slug),\n    })\n\n    window.location.href = \"/\";\n  }\n  \n  const onClose = () => {\n    setModalVisible(false);\n  }\n\n\n  if(the_question){\n    var copy=Array.from(the_question.choices);\n    copy.sort(function(first, second){\n      if (first.votes > second.votes){\n        return -1;\n      }else if (first.votes < second.votes){\n        return 1;\n      }else{\n        return 0;\n      }\n    });\n    choicesSorted = copy;\n\n    for(let i=0; i<copy.length;  i++){\n      l.push(copy[i].choice_text);\n      v.push(copy[i].votes);\n    }\n\n    var time = the_question.created_at;\n    var seconds = parseInt(time.slice(-2));\n    if(v !== []){\n      v.forEach((entry, idx) => {\n        c.push('hsla('+((idx+seconds)*70)+',75%,75%,1)');\n      });\n    }\n  }\n\n  return (\n    <Fragment>\n      <Helmet\n        title = {loaded && the_question.title}\n        meta={[\n          { name: 'description', content: { content } }\n        ]}\n      />\n      <div className={styles.resultsPos}>\n\n        <div className={styles.forSmallerVer}>\n          {/* カテゴリー */}\n          <div>\n            <p className={styles.category}><span className=\"text-primary fa fa-tag\" />\n              Category:\n              {loaded && (\n                <Fragment>\n                  {the_question.category.map((cate, idx) => {\n                    if ( idx === 0){\n                      return (<a className='text-primary' href={'/category/'+cate}> {cate}</a>)\n                    }else{\n                      return (<a className='text-primary' href={'/category/'+cate}>, {cate}</a>)\n                    }\n                  })}\n                </Fragment>\n              )}\n              {!loaded && <Skeleton style={{ marginLeft: 10 }} width={60} />}\n            </p>\n          </div>\n\n          {/* モーダル */}\n          {modalVisible &&  <ModalDelete onClose={onClose} onDelete={onDelete} />}\n\n          {/* タイトル */}\n          <h3 className={styles.title}>{loaded? the_question.title : <SkeletonTheme color=\"white\" highlightColor=\"#d3d3d3\"><Skeleton duration={2} width={1000 - smallDisplay*720} height={20}  /></SkeletonTheme>}</h3>\n          <p className={styles.date}>\n            {loaded ? the_question.created_on : <SkeletonTheme color=\"white\" highlightColor=\"#d3d3d3\"><Skeleton duration={2} color='white' width={100} height={7}/></SkeletonTheme> }\n          </p>\n          \n          <div style={{ marginBottom: 15 }}>\n            <a style={{ marginRight: 10, color: '#55acee', outline: 'none', border: 'none' }} className='tip' rel=\"noreferrer\" href={loaded && 'https://twitter.com/share?url=https://www.chooseone.app/'+the_question.slug+\"/&text=\"+the_question.title} target=\"_blank\" data-toggle=\"tooltip\" title=\"Share\"><TwitterIcon style={{ fontSize: smallDisplay && '18' }} /></a>\n            <a style={{ color: '#3B5998', outline: 'none', border: 'none' }} rel=\"noreferrer\" href={loaded && \"https://www.facebook.com/share.php?u=https://www.chooseone.app/\"+the_question.slug} target=\"_blank\" data-toggle=\"tooltip\" title=\"Share\"><FacebookIcon style={{ fontSize: smallDisplay && '18' }} /></a>\n          </div>\n\n          {answered && loaded && (\n            <div>\n              <p className={styles.your_vote}>You have voted for {your_vote}</p>\n            </div>\n          )}\n\n        </div>\n\n        {/* 選択肢 */}\n        {!answered && (\n          <div style={{ marginTop: 20 }}>\n            {loaded && (\n              <Fragment>\n                {the_question.choices.map((choice, idx) => (\n                  <div className={styles.choiceBtnPos}>\n                    <StyledButton variant=\"outlined\" color='primary' onClick={() => onChoice(idx)} >{choice.choice_text}</StyledButton>\n                  </div>\n                ))}\n              </Fragment>\n            )}\n            {!loaded && [choiceSkeleton]}\n            {warning !== null && (<p className={styles.warning}>{warning}</p>)}\n\n            {loaded && (\n              <div className={styles.voteBtnPos}>\n                <div className={styles.messageTextPos} >\n                  <Wave\n                    delay={3}\n                    text=\" TAP & GET SURPRISED\"\n                    effect='verticalFadeIn'\n                    effectChange={5.0}\n                  />\n                </div>\n              </div>\n            )}\n\n          </div>\n        )}\n\n        {/* グラフ系 */}\n        {answered && loaded && (\n          <Fragment>\n            <div className={styles.table} >\n              <table className='table' style={{ margin: 0 }}>\n                <thead>\n                  <tr>\n                    <td />\n                    <td>Choices</td>\n                    <td>Votes</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  {choicesSorted.map((choice, idx) => (\n                    <tr style={{ backgroundColor: c[idx] }} >\n                      <th scope=\"row\">&nbsp;&nbsp;{idx+1}</th>\n                      <td >{choice.choice_text}</td>\n                      <td>{choice.votes}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            <div className={styles.graphs}>\n              <div className={styles.pieGraph}><PieChart skeleton={!loaded} small={smallDisplay} labels={l} values={v} colors={c} /></div>\n              <div className={styles.barGraph}><BarChart skeleton={!loaded} small={smallDisplay} labels={l} values={v} colors={c} /></div>\n            </div>\n          </Fragment>\n        )}\n\n        {loaded && (\n          <Fragment>\n            {/* ボタン */}\n            <div className={styles.buttonsPos} style={{ marginTop: 100 - answered*80 }}>\n              <ThemeProvider theme={theme}>\n                <ButtonGroup size={smallDisplay ? 'small' : 'default'} variant=\"contained\" >\n                  {!likeIt && <Button onClick={onLikeit} startIcon={<FavoriteIcon fontSize='small'/>} color='primary' style={{ fontSize: 12 }}>{loaded ? the_question.likes : 'Like'}</Button>}\n                  {likeIt && <Button onClick={onLikeit} startIcon={<FavoriteIcon color='secondary' />} color='primary' style={{ fontSize: 12 }} >{loaded ? the_question.likes : 'Like'}</Button>}\n                  {madeIt && <Button onClick={() => setModalVisible(true)} startIcon={<DeleteIcon fontSize='small' />} style={{ fontSize: 12 }} color='secondary' >Delete</Button>}\n                </ButtonGroup>\n              </ThemeProvider>\n            </div>\n\n            {/* 似ている投稿 */}\n            {answered && (\n              <div>\n                <h3 className={styles.mayLike}>Questions You May Like</h3>\n                <div className={styles.similarPostsPos}>\n                  <InfiniteScroll\n                    loadMore={loadMore}\n                    hasMore={hasMore}\n                    threshold={500}\n                    loader={<div></div> }\n                  >\n                    {relatedQues.length !== 0 && <QuestionList questions={relatedQues} />}\n                  </InfiniteScroll>\n                  \n                  {relatedQues.length === 0 && <WindMillLoading style={{ position: 'relative', marginTop: 50, marginLeft: 50,}} color='rgb(39, 169, 68)' speed={1.2} size='large' />}\n                </div>\n              </div>\n            )}\n          </Fragment>\n        )}\n      </div>\n    </Fragment>\n  )\n}\n\nconst useStyles = makeStyles(() => createStyles({\n  choiceButton: {\n    \n  },\n  messageTextPos: {\n    fontSize: 13,\n    marginTop: 40,\n    fontFamily: 'Impact, sans-serif',\n    fontStyle: 'italic',\n    fontWeight: 900,\n    letterSpacing: '0.3em',\n    color: 'rgb(40, 168, 69)',\n    textShadow: '0.2 0.5px 0.5px 0px #004',\n    // transform: 'rotate(-10deg)',\n  },\n  category: {\n    fontFamily: 'latienne-pro, serif',\n    fontStyle: 'normal',\n    fontWeight: 400,\n    fontSize: 12,\n  },\n  title: {\n    fontFamily: 'latienne-pro, serif',\n    fontStyle: 'normal',\n    fontWeight: 500,\n    fontSize: 25,\n  },\n  mayLike: {\n    marginTop: 40,\n    marginBottom: 20,\n    fontFamily: 'lust-script, sans-serif',\n    fontStyle: 'normal',\n    fontWeight: 700,\n  },\n  similarPostsPos: {\n    width: '70%',\n  },\n  table: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    marginTop: 20,\n    marginBottom: 25,\n    backgroundColor: 'white',\n    width: '100%',\n  },\n  graphs: {\n    display: 'flex',\n    width: '100%',\n    marginBottom: 15,\n  },\n  pieGraph: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    padding: 10,\n    width: '49%',\n    backgroundColor: 'white',\n    height: 400,\n    marginRight: 10,\n  },\n  barGraph: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    padding: 10,\n    width: '50%',\n    backgroundColor: 'white',\n    height: 400,\n  },\n  your_vote: {\n    color: 'yellowgreen',\n    fontSize: 14,\n  },\n  resultsPos: {\n    paddingTop: 15,\n    width: '100%',\n    paddingBottom: 30,\n  },\n  date: {\n    marginLeft: 20,\n    fontFamily: 'georgia, serif',\n    fontSize: 12,\n    color: '#457AFB',\n  },\n\n  // QuestionDetail\n\n  the_choice: {\n    marginLeft: 0,\n  },\n  choiceBtnPos: {\n    marginLeft: 25,\n    marginBottom: 8,\n    fontSize: 12,\n  },\n  voteBtnPos: {\n    marginTop: 20,\n    marginLeft: 25,\n  },\n  buttons: {\n    borderRadius: 30,\n  },\n\n  warning: {\n    color: 'red',\n    fontSize: 12,\n    margin: '0px 0px 0px 25px',\n    padding: 0,\n  },\n\n  '@media (max-width: 500px)': {\n    date: {\n      marginBottom: 10,\n    },\n    your_vote: {\n      fontSize: 12,\n      marginBottom: 10,\n    },\n    category: {\n      fontSize: 12,\n    },\n    title: {\n      fontSize: 24,\n      marginTop: 10,\n    },\n    mayLike: {\n      margin: '40px 0px 5px 10px',\n      fontSize: 20,\n    },\n    buttonsPos: {\n      marginLeft: 15,\n    },\n    forSmallerVer: {\n      paddingLeft: 15,\n      // marginTop: 10,\n    },\n    table: {\n      filter: 'drop-shadow(5px 0px 4px rgba(160, 160, 160, 0.7))',\n      marginTop: 10,\n      marginBottom: 4,\n    },\n    pieGraph: {\n      filter: 'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',\n      height: 150,\n      marginBottom: 7,\n      borderRadius: 4,\n      padding: 4,\n      marginRight: 3,\n    },\n    barGraph: {\n      filter: 'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',\n      height: 150,\n      marginBottom: 4,\n      borderRadius: 4,\n      padding: 4,\n    },\n    similarPostsPos: {\n      width: '100%',\n    },\n    voteBtnPos: {\n      marginLeft: 15,   //　元は15\n    },\n    messageTextPos: {\n      marginLeft: 30,\n    },\n    choiceBtnPos: {\n      marginLeft: 35,\n    },\n  },\n}));\n\n\nconst StyledButton = withStyles({\n  root: {\n    borderColor: 'rgb(3, 122, 255)', \n    color: 'rgb(3, 122, 255)', \n    fontSize: 11, \n    borderRadius: 15, \n    width: Math.min(300, window.innerWidth*0.6),\n    textTransform: 'none',\n  },\n})(Button);"]},"metadata":{},"sourceType":"module"}