{"ast":null,"code":"var _jsxFileName = \"/Users/horikazuto/ChooseOne/LatestChooseOne/src/screens/QuestionSearch.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, Fragment } from 'react';\nimport { WindMillLoading } from 'react-loadingg';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { Helmet } from \"react-helmet\";\nimport QuestionList from '../components/QuestionList.js'; // Firebase\n\nimport { getApps, initializeApp } from 'firebase/app';\nimport { getFirestore, collection, getDocs } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyArjDv3hS4_rw1YyNz-JFXDX1ufF72bqr8\",\n  authDomain: \"chooseone-105a9.firebaseapp.com\",\n  databaseURL: \"https://chooseone-default-rtdb.firebaseio.com\",\n  projectId: \"chooseone\",\n  storageBucket: \"chooseone.appspot.com\",\n  messagingSenderId: \"722704825746\",\n  appId: \"1:722704825746:web:73f11551b9e59f4bc2d54b\",\n  measurementId: \"G-YJ97DZH6V5\"\n};\nvar db = '';\n\nif (!getApps().length) {\n  const firebaseApp = initializeApp(firebaseConfig);\n  db = getFirestore(firebaseApp);\n} else {\n  db = getFirestore();\n}\n\nexport default function QuestionSearch(props) {\n  _s();\n\n  const [results, setResults] = useState(null);\n  const query = props.match.params.query;\n  const q = query.toLowerCase();\n  const styles = useStyles();\n  const smallDisplay = useMediaQuery('(max-width:500px)');\n  useEffect(() => {\n    if (results !== null) return null;\n    const promise = new Promise(function (resolve) {\n      resolve(getDocs(collection(db, 'questions')));\n    });\n    var ques = [];\n    promise.then(qq => {\n      Promise.all(qq.docs.map(que => {\n        var question = que.data();\n        if (question.slug.includes('___')) var slug = question.slug.split('___')[0];else var slug = question.slug;\n        var titleWords = slug.split('-');\n\n        if (titleWords.includes(q)) {\n          ques.unshift(question);\n        } else {\n          for (var i = 0; i < question.choices.length; i++) {\n            var c = question.choices[i].choice_text.toLowerCase().split(' ');\n\n            if (c.includes(q)) {\n              ques.push(question);\n              break;\n            }\n          }\n        }\n\n        return null;\n      }));\n    }).then(() => {\n      setResults(ques);\n    });\n  });\n\n  if (results === null) {\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: styles.title,\n        children: \"Search Results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: \"      Searching...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.loadingPos,\n        children: /*#__PURE__*/_jsxDEV(WindMillLoading, {\n          className: styles.loadingPos,\n          speed: 1.2,\n          size: smallDisplay ? 'small' : 'large'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Helmet, {\n        title: \"Search Results\",\n        meta: [{\n          name: 'description',\n          content: 'ChooseOne lets you have access to general understandings through user-interactive questions. The more you vote, the more you can influence the results, and it can be helpful to all the people who want to know the results.'\n        }]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: styles.title,\n        children: \"Search Results\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), results.length === 0 && /*#__PURE__*/_jsxDEV(\"pre\", {\n        className: styles.forSmallNoMatch,\n        children: [\"      No search results for - \", query, \" -\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 34\n      }, this), results.length !== 0 && /*#__PURE__*/_jsxDEV(Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"pre\", {\n          children: [\"      - \", query, \" -\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(QuestionList, {\n          questions: results\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }\n}\n\n_s(QuestionSearch, \"Oaa314bNG22ksMzmN3rROMrToEg=\", false, function () {\n  return [useStyles, useMediaQuery];\n});\n\n_c = QuestionSearch;\nconst useStyles = makeStyles(() => createStyles({\n  title: {\n    fontFamily: 'lust-script, sans-serif',\n    fontStyle: 'normal',\n    fontWeight: 700,\n    fontSize: 24\n  },\n  loadingPos: {\n    marginTop: 50,\n    marginLeft: 50,\n    position: 'relative'\n  },\n  '@media (max-width: 500px)': {\n    title: {\n      fontSize: 22,\n      marginLeft: 13,\n      marginTop: 7\n    },\n    forSmallNoMatch: {\n      fontSize: 12\n    },\n    loadingPos: {\n      position: 'relative',\n      fontSize: 10,\n      marginTop: 70,\n      marginLeft: -150\n    }\n  }\n}));\n\nvar _c;\n\n$RefreshReg$(_c, \"QuestionSearch\");","map":{"version":3,"sources":["/Users/horikazuto/ChooseOne/LatestChooseOne/src/screens/QuestionSearch.js"],"names":["React","useState","useEffect","Fragment","WindMillLoading","makeStyles","createStyles","useMediaQuery","Helmet","QuestionList","getApps","initializeApp","getFirestore","collection","getDocs","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","length","firebaseApp","QuestionSearch","props","results","setResults","query","match","params","q","toLowerCase","styles","useStyles","smallDisplay","promise","Promise","resolve","ques","then","qq","all","docs","map","que","question","data","slug","includes","split","titleWords","unshift","i","choices","c","choice_text","push","title","loadingPos","name","content","forSmallNoMatch","fontFamily","fontStyle","fontWeight","fontSize","marginTop","marginLeft","position"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport { WindMillLoading } from 'react-loadingg';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { Helmet } from \"react-helmet\";\n\nimport QuestionList from '../components/QuestionList.js';\n\n// Firebase\nimport { getApps, initializeApp } from 'firebase/app';\nimport { getFirestore, collection, getDocs } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyArjDv3hS4_rw1YyNz-JFXDX1ufF72bqr8\",\n  authDomain: \"chooseone-105a9.firebaseapp.com\",\n  databaseURL: \"https://chooseone-default-rtdb.firebaseio.com\",\n  projectId: \"chooseone\",\n  storageBucket: \"chooseone.appspot.com\",\n  messagingSenderId: \"722704825746\",\n  appId: \"1:722704825746:web:73f11551b9e59f4bc2d54b\",\n  measurementId: \"G-YJ97DZH6V5\"\n};\nvar db = '';\nif (!getApps().length){ \n  const firebaseApp = initializeApp(firebaseConfig);\n  db = getFirestore(firebaseApp);\n}else{\n  db = getFirestore();\n}\n\n\nexport default function QuestionSearch (props) {\n\n  const [results, setResults] = useState(null);\n  const query = props.match.params.query;\n  const q = query.toLowerCase();\n  const styles = useStyles();\n  const smallDisplay = useMediaQuery('(max-width:500px)');\n\n  useEffect(() => {\n    if(results !== null) return null;\n\n    const promise = new Promise(function(resolve) {\n      resolve(getDocs(collection(db, 'questions')))\n    })\n    var ques = [];\n    promise.then((qq) => {\n      Promise.all(qq.docs.map(que => {\n        var question = que.data();\n        if(question.slug.includes('___')) var slug = question.slug.split('___')[0];\n        else var slug = question.slug;\n        var titleWords = slug.split('-');\n        if(titleWords.includes(q)) {\n          ques.unshift(question);\n        }else{\n          for(var i=0; i<question.choices.length; i++){\n            var c = question.choices[i].choice_text.toLowerCase().split(' ');\n            if(c.includes(q)){ \n              ques.push(question)\n              break;\n            }\n          }\n        }\n        return null;\n      }));\n    }).then(() => {\n      setResults(ques);\n    })\n  });\n\n  if(results === null){\n    return (\n      <Fragment>\n        <p className={styles.title}>Search Results</p>\n        <div><pre>      Searching...</pre></div>\n        <div className={styles.loadingPos}>\n          <WindMillLoading className={styles.loadingPos} speed={1.2} size={smallDisplay ? 'small' : 'large'} />\n        </div>\n      </Fragment>\n    )\n  }else{\n    return (\n      <Fragment>\n        <Helmet\n          title = 'Search Results'\n          meta={[\n            { name: 'description', content: 'ChooseOne lets you have access to general understandings through user-interactive questions. The more you vote, the more you can influence the results, and it can be helpful to all the people who want to know the results.' }\n          ]}\n        />\n        <h3 className={styles.title}>Search Results</h3>\n        {results.length === 0 && <pre className={styles.forSmallNoMatch}>      No search results for - {query} -</pre>}\n        {results.length !== 0 && (\n          <Fragment>\n            <pre>      - {query} -</pre>\n            <QuestionList questions={results} />\n          </Fragment>\n        )}\n      </Fragment>\n    )\n  }\n}\n\nconst useStyles = makeStyles(() => createStyles({\n  title: {\n    fontFamily: 'lust-script, sans-serif',\n    fontStyle: 'normal',\n    fontWeight: 700,\n    fontSize: 24,\n  },\n  loadingPos: {\n    marginTop: 50,\n    marginLeft: 50,\n    position: 'relative',\n  },\n\n  '@media (max-width: 500px)': {\n    title: {\n      fontSize: 22,\n      marginLeft: 13,\n      marginTop: 7,\n    },\n    forSmallNoMatch: {\n      fontSize: 12,\n    },\n    loadingPos: {\n      position: 'relative',\n      fontSize: 10,\n      marginTop: 70,\n      marginLeft: -150,\n    }\n  }\n}));\n"]},"metadata":{},"sourceType":"module"}