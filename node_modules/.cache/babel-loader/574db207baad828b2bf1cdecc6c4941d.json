{"ast":null,"code":"import _objectSpread from\"/Users/horikazuto/ChooseOne/LatestChooseOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/horikazuto/ChooseOne/LatestChooseOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/horikazuto/ChooseOne/LatestChooseOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/horikazuto/ChooseOne/LatestChooseOne/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,Fragment}from'react';import Button from'@material-ui/core/Button';import ButtonGroup from'@material-ui/core/ButtonGroup';import DeleteIcon from'@material-ui/icons/Delete';import FavoriteIcon from'@material-ui/icons/Favorite';import{makeStyles,createStyles}from'@material-ui/core';import{createMuiTheme,ThemeProvider,withStyles}from'@material-ui/core/styles';import TwitterIcon from'@material-ui/icons/Twitter';import FacebookIcon from'@material-ui/icons/Facebook';import Skeleton,{SkeletonTheme}from'react-loading-skeleton';import{WindMillLoading}from'react-loadingg';import useMediaQuery from'@material-ui/core/useMediaQuery';import{Helmet}from\"react-helmet\";import{Wave}from\"react-animated-text\";import InfiniteScroll from\"react-infinite-scroller\";import QuestionList from'../components/QuestionList';import ModalDelete from'../components/ModalDelete';import PieChart from'../components/PieChart';import BarChart from'../components/BarChart';// Firebase\nimport{getApps,initializeApp}from'firebase/app';import{getFirestore,updateDoc,increment,collection,deleteDoc,startAfter,arrayRemove,arrayUnion,query,where,getDoc,doc,getDocs,orderBy,limit}from\"firebase/firestore\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var firebaseConfig={apiKey:\"AIzaSyArjDv3hS4_rw1YyNz-JFXDX1ufF72bqr8\",authDomain:\"chooseone-105a9.firebaseapp.com\",databaseURL:\"https://chooseone-default-rtdb.firebaseio.com\",projectId:\"chooseone\",storageBucket:\"chooseone.appspot.com\",messagingSenderId:\"722704825746\",appId:\"1:722704825746:web:73f11551b9e59f4bc2d54b\",measurementId:\"G-YJ97DZH6V5\"};var db='';if(!getApps().length){var firebaseApp=initializeApp(firebaseConfig);db=getFirestore(firebaseApp);}else{db=getFirestore();}var tabColors=['#ff69b4'];for(var i=1;i<11;i++){tabColors.push('hsla('+i*100+', 75%, 55%, 1)');}var theme=createMuiTheme({palette:{primary:{main:'rgb(3, 122, 255)'},secondary:{main:'#f50057'},green:{main:'rgb(40, 168, 69)'}}});export default function QuestionDetail(props){var uid=localStorage.getItem('chooseoneUid');var the_slug=props.match.params.the_slug;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalVisible=_useState2[0],setModalVisible=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),madeIt=_useState6[0],setMadeIt=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),the_question=_useState8[0],setTheQuestion=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),likeIt=_useState10[0],setLikeIt=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),your_vote=_useState12[0],setYourVote=_useState12[1];var choicesSorted=[];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),relatedQues=_useState14[0],setRelatedQues=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),answered=_useState16[0],setAnswered=_useState16[1];var _useState17=useState(true),_useState18=_slicedToArray(_useState17,2),hasMore=_useState18[0],setHasMore=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),end=_useState20[0],setEnd=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),last=_useState22[0],setLast=_useState22[1];var loaded=relatedQues.length!==0;var styles=useStyles();var smallDisplay=useMediaQuery('(max-width:500px)');var l=[];var v=[];var c=[];var content='';if(the_question){for(var i=0;i<the_question.choices.length;i++){if(i)content+=the_question.choices[i].choice_text;else content+=' vs '+the_question.choices[i].choice_text;}}var questionRef=doc(db,'questions',the_slug);var userRef=user!==null?doc(db,'users',uid):'';// QuestionDetail\nvar _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),warning=_useState24[0],setWarning=_useState24[1];var _useState25=useState(null),_useState26=_slicedToArray(_useState25,2),the_choice=_useState26[0],setTheChoice=_useState26[1];var choiceSkeleton=[];for(var i=0;i<5-smallDisplay*2;i++){choiceSkeleton.push(/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:30,marginTop:15},children:/*#__PURE__*/_jsx(SkeletonTheme,{Primarycolor:\"white\",highlightColor:\"#d3d3d3\",children:/*#__PURE__*/_jsx(Skeleton,{duration:2,color:\"white\",width:100,height:15-smallDisplay*5})})}));}useEffect(function(){if(uid===null||user!==null)return null;if(user===null){// const u = doc(db, 'users', uid);\n// const promise = new Promise(function(resolve) {\n//   resolve(getDoc(u));\n// })\n// promise.then((us) => {\n//   if(us.exists){\n//     var the_user = us.data();\n//     setUser(the_user);\n//     if (the_user.question_liked.includes(the_slug)){\n//       setLikeIt(true);\n//     }else{\n//       setLikeIt(false);\n//     }\n//     if (the_user.question_created.includes(the_slug)){\n//       setMadeIt(true);\n//     }else{\n//       setMadeIt(false);\n//     }\n//     if(the_user.question_voted.some((q) => q.question === the_slug)){\n//       setAnswered(true);\n//       for(var i=0; i<the_user.question_voted.length; i++){\n//         if(the_user.question_voted[i].question === the_slug) setYourVote(the_user.question_voted[i].answer)\n//       }\n//     }\n//   }\n// })\n}// const qu = doc(db, 'questions', the_slug);\n// const promiseD = new Promise(function(resolve, reject) {\n//   resolve(getDoc(qu));\n// })\n// promiseD.then((doc) => {\n//   if(doc.exists){\n//     setTheQuestion(doc.data());\n//     const ques = query(collection(db, 'questions'), where('category', 'array-contains-any', doc.data().category), orderBy('created_at', 'desc'), limit(10));\n//     const promiseDD = new Promise(function(resolve) {\n//       resolve(getDocs(ques));\n//     })\n//     promiseDD.then(qq => {\n//       var questionSimilar = [];\n//       Promise.all(qq.docs.map(async doc => {\n//         questionSimilar.push(doc.data());\n//         if(questionSimilar.length === 10) setLast(doc);\n//       })).then(() => {\n//         setRelatedQues(questionSimilar);\n//       });\n//     })\n//   }else{\n//     window.location.href = '/';\n//   }\n// });\n// if(end === null){\n//   setEnd(query(collection(db, 'questions'), orderBy('created_at', 'asc'), limit(1)));\n// }\n});var loadMore=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var more,next,ques;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:more=true;setHasMore(false);_context2.next=4;return getDocs(query(collection(db,'questions'),where('category','array-contains-any',the_question.category),orderBy('created_at','desc'),startAfter(last),limit(10)));case 4:next=_context2.sent;ques=[];_context2.next=8;return Promise.all(next.docs.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(doc){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:ques.push(doc.data());if(doc===end||ques.length===10){if(doc===end)more=false;setLast(doc);}case 2:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}())).then(function(){return setRelatedQues(relatedQues.concat(ques));});case 8:if(more)setHasMore(true);else setHasMore(false);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function loadMore(){return _ref.apply(this,arguments);};}();var onChoice=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(idx){var the_choice,the_slug,your_vote,copy;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:the_choice=idx;the_slug=the_question.slug;your_vote=the_question.choices[the_choice].choice_text;setYourVote(your_vote);setAnswered(true);copy=Object.create(the_question);copy.choices[the_choice].votes=parseInt(copy.choices[the_choice].votes,10)+1;setTheQuestion(copy.__proto__);_context3.next=10;return updateDoc(questionRef,{choices:copy.choices,all_votes:increment(1),users_voted:arrayUnion(uid)});case 10:_context3.next=12;return updateDoc(userRef,{question_voted:arrayUnion({question:the_slug,answer:your_vote})});case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function onChoice(_x2){return _ref3.apply(this,arguments);};}();var onLikeit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!likeIt){_context4.next=9;break;}setLikeIt(false);_context4.next=4;return updateDoc(userRef,{question_liked:arrayRemove(the_question.slug)});case 4:_context4.next=6;return updateDoc(questionRef,{likes:increment(-1)});case 6:setTheQuestion(_objectSpread(_objectSpread({},the_question),{},{likes:the_question.likes-1}));_context4.next=15;break;case 9:setLikeIt(true);_context4.next=12;return updateDoc(userRef,{question_liked:arrayUnion(the_question.slug)});case 12:_context4.next=14;return updateDoc(questionRef,{likes:increment(1)});case 14:setTheQuestion(_objectSpread(_objectSpread({},the_question),{},{likes:the_question.likes+1}));case 15:case\"end\":return _context4.stop();}}},_callee4);}));return function onLikeit(){return _ref4.apply(this,arguments);};}();var onDelete=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return deleteDoc(questionRef);case 2:_context5.next=4;return updateDoc(userRef,{question_created:arrayRemove(the_question.slug)});case 4:window.location.href=\"/\";case 5:case\"end\":return _context5.stop();}}},_callee5);}));return function onDelete(){return _ref5.apply(this,arguments);};}();var onClose=function onClose(){setModalVisible(false);};if(the_question){var copy=Array.from(the_question.choices);copy.sort(function(first,second){if(first.votes>second.votes){return-1;}else if(first.votes<second.votes){return 1;}else{return 0;}});choicesSorted=copy;for(var _i=0;_i<copy.length;_i++){l.push(copy[_i].choice_text);v.push(copy[_i].votes);}var time=the_question.created_at;var seconds=parseInt(time.slice(-2));if(v!==[]){v.forEach(function(entry,idx){c.push('hsla('+(idx+seconds)*70+',75%,75%,1)');});}}return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(Helmet,{title:loaded&&the_question.title,meta:[{name:'description',content:{content:content}}]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.resultsPos,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.forSmallerVer,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:styles.category,children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-primary fa fa-tag\"}),\"Category:\",loaded&&/*#__PURE__*/_jsx(Fragment,{children:the_question.category.map(function(cate,idx){if(idx===0){return/*#__PURE__*/_jsxs(\"a\",{className:\"text-primary\",href:'/category/'+cate,children:[\" \",cate]});}else{return/*#__PURE__*/_jsxs(\"a\",{className:\"text-primary\",href:'/category/'+cate,children:[\", \",cate]});}})}),!loaded&&/*#__PURE__*/_jsx(Skeleton,{style:{marginLeft:10},width:60})]})}),modalVisible&&/*#__PURE__*/_jsx(ModalDelete,{onClose:onClose,onDelete:onDelete}),/*#__PURE__*/_jsx(\"h3\",{className:styles.title,children:loaded?the_question.title:/*#__PURE__*/_jsx(SkeletonTheme,{color:\"white\",highlightColor:\"#d3d3d3\",children:/*#__PURE__*/_jsx(Skeleton,{duration:2,width:1000-smallDisplay*720,height:20})})}),/*#__PURE__*/_jsx(\"p\",{className:styles.date,children:loaded?the_question.created_on:/*#__PURE__*/_jsx(SkeletonTheme,{color:\"white\",highlightColor:\"#d3d3d3\",children:/*#__PURE__*/_jsx(Skeleton,{duration:2,color:\"white\",width:100,height:7})})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:15},children:[/*#__PURE__*/_jsx(\"a\",{style:{marginRight:10,color:'#55acee',outline:'none',border:'none'},className:\"tip\",rel:\"noreferrer\",href:loaded&&'https://twitter.com/share?url=https://www.chooseone.app/'+the_question.slug+\"/&text=\"+the_question.title,target:\"_blank\",\"data-toggle\":\"tooltip\",title:\"Share\",children:/*#__PURE__*/_jsx(TwitterIcon,{style:{fontSize:smallDisplay&&'18'}})}),/*#__PURE__*/_jsx(\"a\",{style:{color:'#3B5998',outline:'none',border:'none'},rel:\"noreferrer\",href:loaded&&\"https://www.facebook.com/share.php?u=https://www.chooseone.app/\"+the_question.slug,target:\"_blank\",\"data-toggle\":\"tooltip\",title:\"Share\",children:/*#__PURE__*/_jsx(FacebookIcon,{style:{fontSize:smallDisplay&&'18'}})})]}),answered&&loaded&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"p\",{className:styles.your_vote,children:[\"You have voted for \",your_vote]})})]}),!answered&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:20},children:[loaded&&/*#__PURE__*/_jsx(Fragment,{children:the_question.choices.map(function(choice,idx){return/*#__PURE__*/_jsx(\"div\",{className:styles.choiceBtnPos,children:/*#__PURE__*/_jsx(StyledButton,{variant:\"outlined\",color:\"primary\",onClick:function onClick(){return onChoice(idx);},children:choice.choice_text})});})}),!loaded&&[choiceSkeleton],warning!==null&&/*#__PURE__*/_jsx(\"p\",{className:styles.warning,children:warning}),loaded&&/*#__PURE__*/_jsx(\"div\",{className:styles.voteBtnPos,children:/*#__PURE__*/_jsx(\"div\",{className:styles.messageTextPos,children:/*#__PURE__*/_jsx(Wave,{delay:3,text:\" TAP & GET SURPRISED\",effect:\"verticalFadeIn\",effectChange:5.0})})})]}),answered&&loaded&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.table,children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",style:{margin:0},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:\"Choices\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Votes\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:choicesSorted.map(function(choice,idx){return/*#__PURE__*/_jsxs(\"tr\",{style:{backgroundColor:c[idx]},children:[/*#__PURE__*/_jsxs(\"th\",{scope:\"row\",children:[\"\\xA0\\xA0\",idx+1]}),/*#__PURE__*/_jsx(\"td\",{children:choice.choice_text}),/*#__PURE__*/_jsx(\"td\",{children:choice.votes})]});})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.graphs,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.pieGraph,children:/*#__PURE__*/_jsx(PieChart,{skeleton:!loaded,small:smallDisplay,labels:l,values:v,colors:c})}),/*#__PURE__*/_jsx(\"div\",{className:styles.barGraph,children:/*#__PURE__*/_jsx(BarChart,{skeleton:!loaded,small:smallDisplay,labels:l,values:v,colors:c})})]})]}),loaded&&/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:styles.buttonsPos,style:{marginTop:100-answered*80},children:/*#__PURE__*/_jsx(ThemeProvider,{theme:theme,children:/*#__PURE__*/_jsxs(ButtonGroup,{size:smallDisplay?'small':'default',variant:\"contained\",children:[!likeIt&&/*#__PURE__*/_jsx(Button,{onClick:onLikeit,startIcon:/*#__PURE__*/_jsx(FavoriteIcon,{fontSize:\"small\"}),color:\"primary\",style:{fontSize:12},children:loaded?the_question.likes:'Like'}),likeIt&&/*#__PURE__*/_jsx(Button,{onClick:onLikeit,startIcon:/*#__PURE__*/_jsx(FavoriteIcon,{color:\"secondary\"}),color:\"primary\",style:{fontSize:12},children:loaded?the_question.likes:'Like'}),madeIt&&/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setModalVisible(true);},startIcon:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\"}),style:{fontSize:12},color:\"secondary\",children:\"Delete\"})]})})}),answered&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:styles.mayLike,children:\"Questions You May Like\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.similarPostsPos,children:[/*#__PURE__*/_jsx(InfiniteScroll,{loadMore:loadMore,hasMore:hasMore,threshold:500,loader:/*#__PURE__*/_jsx(\"div\",{}),children:relatedQues.length!==0&&/*#__PURE__*/_jsx(QuestionList,{questions:relatedQues})}),relatedQues.length===0&&/*#__PURE__*/_jsx(WindMillLoading,{style:{position:'relative',marginTop:50,marginLeft:50},color:\"rgb(39, 169, 68)\",speed:1.2,size:\"large\"})]})]})]})]})]});}var useStyles=makeStyles(function(){return createStyles({choiceButton:{},messageTextPos:{fontSize:13,marginTop:40,fontFamily:'Impact, sans-serif',fontStyle:'italic',fontWeight:900,letterSpacing:'0.3em',color:'rgb(40, 168, 69)',textShadow:'0.2 0.5px 0.5px 0px #004'// transform: 'rotate(-10deg)',\n},category:{fontFamily:'latienne-pro, serif',fontStyle:'normal',fontWeight:400,fontSize:12},title:{fontFamily:'latienne-pro, serif',fontStyle:'normal',fontWeight:500,fontSize:25},mayLike:{marginTop:40,marginBottom:20,fontFamily:'lust-script, sans-serif',fontStyle:'normal',fontWeight:700},similarPostsPos:{width:'70%'},table:{filter:'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',borderRadius:15,marginTop:20,marginBottom:25,backgroundColor:'white',width:'100%'},graphs:{display:'flex',width:'100%',marginBottom:15},pieGraph:{filter:'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',borderRadius:15,padding:10,width:'49%',backgroundColor:'white',height:400,marginRight:10},barGraph:{filter:'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',borderRadius:15,padding:10,width:'50%',backgroundColor:'white',height:400},your_vote:{color:'yellowgreen',fontSize:14},resultsPos:{paddingTop:15,width:'100%',paddingBottom:30},date:{marginLeft:20,fontFamily:'georgia, serif',fontSize:12,color:'#457AFB'},// QuestionDetail\nthe_choice:{marginLeft:0},choiceBtnPos:{marginLeft:25,marginBottom:8,fontSize:12},voteBtnPos:{marginTop:20,marginLeft:25},buttons:{borderRadius:30},warning:{color:'red',fontSize:12,margin:'0px 0px 0px 25px',padding:0},'@media (max-width: 500px)':{date:{marginBottom:10},your_vote:{fontSize:12,marginBottom:10},category:{fontSize:12},title:{fontSize:24,marginTop:10},mayLike:{margin:'40px 0px 5px 10px',fontSize:20},buttonsPos:{marginLeft:15},forSmallerVer:{paddingLeft:15// marginTop: 10,\n},table:{filter:'drop-shadow(5px 0px 4px rgba(160, 160, 160, 0.7))',marginTop:10,marginBottom:4},pieGraph:{filter:'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',height:150,marginBottom:7,borderRadius:4,padding:4,marginRight:3},barGraph:{filter:'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',height:150,marginBottom:4,borderRadius:4,padding:4},similarPostsPos:{width:'100%'},voteBtnPos:{marginLeft:15//　元は15\n},messageTextPos:{marginLeft:30},choiceBtnPos:{marginLeft:35}}});});var StyledButton=withStyles({root:{borderColor:'rgb(3, 122, 255)',color:'rgb(3, 122, 255)',fontSize:11,borderRadius:15,width:Math.min(300,window.innerWidth*0.6),textTransform:'none'}})(Button);","map":{"version":3,"sources":["/Users/horikazuto/ChooseOne/LatestChooseOne/src/screens/QuestionDetail.js"],"names":["React","useEffect","useState","Fragment","Button","ButtonGroup","DeleteIcon","FavoriteIcon","makeStyles","createStyles","createMuiTheme","ThemeProvider","withStyles","TwitterIcon","FacebookIcon","Skeleton","SkeletonTheme","WindMillLoading","useMediaQuery","Helmet","Wave","InfiniteScroll","QuestionList","ModalDelete","PieChart","BarChart","getApps","initializeApp","getFirestore","updateDoc","increment","collection","deleteDoc","startAfter","arrayRemove","arrayUnion","query","where","getDoc","doc","getDocs","orderBy","limit","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","db","length","firebaseApp","tabColors","i","push","theme","palette","primary","main","secondary","green","QuestionDetail","props","uid","localStorage","getItem","the_slug","match","params","modalVisible","setModalVisible","user","setUser","madeIt","setMadeIt","the_question","setTheQuestion","likeIt","setLikeIt","your_vote","setYourVote","choicesSorted","relatedQues","setRelatedQues","answered","setAnswered","hasMore","setHasMore","end","setEnd","last","setLast","loaded","styles","useStyles","smallDisplay","l","v","c","content","choices","choice_text","questionRef","userRef","warning","setWarning","the_choice","setTheChoice","choiceSkeleton","marginLeft","marginTop","loadMore","more","category","next","ques","Promise","all","docs","map","data","then","concat","onChoice","idx","slug","copy","Object","create","votes","parseInt","__proto__","all_votes","users_voted","question_voted","question","answer","onLikeit","question_liked","likes","onDelete","question_created","window","location","href","onClose","Array","from","sort","first","second","time","created_at","seconds","slice","forEach","entry","title","name","resultsPos","forSmallerVer","cate","date","created_on","marginBottom","marginRight","color","outline","border","fontSize","choice","choiceBtnPos","voteBtnPos","messageTextPos","table","margin","backgroundColor","graphs","pieGraph","barGraph","buttonsPos","mayLike","similarPostsPos","position","choiceButton","fontFamily","fontStyle","fontWeight","letterSpacing","textShadow","width","filter","borderRadius","display","padding","height","paddingTop","paddingBottom","buttons","paddingLeft","StyledButton","root","borderColor","Math","min","innerWidth","textTransform"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, Fragment } from 'react';\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport { makeStyles, createStyles } from '@material-ui/core';\nimport { createMuiTheme, ThemeProvider, withStyles } from '@material-ui/core/styles';\nimport TwitterIcon from '@material-ui/icons/Twitter';\nimport FacebookIcon from '@material-ui/icons/Facebook';\nimport Skeleton, { SkeletonTheme } from 'react-loading-skeleton';\nimport { WindMillLoading } from 'react-loadingg';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport { Helmet } from \"react-helmet\";\nimport { Wave } from \"react-animated-text\";\nimport InfiniteScroll  from \"react-infinite-scroller\"\n\nimport QuestionList from '../components/QuestionList';\nimport ModalDelete from '../components/ModalDelete';\nimport PieChart from '../components/PieChart';\nimport BarChart from '../components/BarChart';\n\n// Firebase\nimport { getApps, initializeApp } from 'firebase/app';\nimport { getFirestore, updateDoc, increment, collection, deleteDoc, startAfter, arrayRemove, arrayUnion, query, \n      where, getDoc, doc, getDocs, orderBy, limit } from \"firebase/firestore\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyArjDv3hS4_rw1YyNz-JFXDX1ufF72bqr8\",\n  authDomain: \"chooseone-105a9.firebaseapp.com\",\n  databaseURL: \"https://chooseone-default-rtdb.firebaseio.com\",\n  projectId: \"chooseone\",\n  storageBucket: \"chooseone.appspot.com\",\n  messagingSenderId: \"722704825746\",\n  appId: \"1:722704825746:web:73f11551b9e59f4bc2d54b\",\n  measurementId: \"G-YJ97DZH6V5\"\n};\nvar db = '';\nif (!getApps().length){ \n  const firebaseApp = initializeApp(firebaseConfig);\n  db = getFirestore(firebaseApp);\n}else{\n  db = getFirestore();\n}\n\nvar tabColors = ['#ff69b4']\nfor(var i=1; i<11; i++) tabColors.push('hsla('+(i*100)+', 75%, 55%, 1)');\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: 'rgb(3, 122, 255)',\n    },\n    secondary: {\n      main: '#f50057',\n    },\n    green: {\n      main: 'rgb(40, 168, 69)',\n    }\n  },\n});\n\nexport default function QuestionDetail (props) {\n\n  const uid = localStorage.getItem('chooseoneUid');\n  const the_slug = props.match.params.the_slug;\n\n  const [modalVisible, setModalVisible] = useState(false);\n  const [user, setUser] = useState(null);\n  const [madeIt, setMadeIt] = useState(null);\n  const [the_question, setTheQuestion] = useState(null);\n  const [likeIt, setLikeIt] = useState(false);\n  const [your_vote, setYourVote] = useState(null);\n  var choicesSorted = [];\n  const [relatedQues, setRelatedQues] = useState([]);\n  const [answered, setAnswered] = useState(false);\n  const [hasMore, setHasMore] = useState(true);\n  const [end, setEnd] = useState(null);\n  const [last, setLast] = useState(null);\n\n  const loaded = relatedQues.length !== 0;\n  const styles = useStyles();\n  const smallDisplay = useMediaQuery('(max-width:500px)');\n  var l = [];\n  var v = [];\n  var c = [];\n  var content = '';\n  if(the_question){\n    for(var i=0; i<the_question.choices.length; i++){\n      if(i) content += the_question.choices[i].choice_text;\n      else content += ' vs ' + the_question.choices[i].choice_text;\n    }\n  }\n\n  const questionRef = doc(db, 'questions', the_slug);\n  const userRef = user !== null ? doc(db, 'users', uid) : '';\n\n  // QuestionDetail\n  const [warning, setWarning] = useState(null);\n  const [the_choice, setTheChoice] = useState(null);\n  var choiceSkeleton = [];\n  for(var i=0; i<(5-smallDisplay*2); i++){\n    choiceSkeleton.push(<div style={{ marginLeft: 30, marginTop: 15 }}><SkeletonTheme Primarycolor=\"white\" highlightColor=\"#d3d3d3\"><Skeleton duration={2} color='white' width={100} height={15 - smallDisplay*5}/></SkeletonTheme></div>)\n  }\n\n  useEffect(() => {\n    if(uid === null || user !== null) return null;\n\n    if(user === null){\n      // const u = doc(db, 'users', uid);\n      // const promise = new Promise(function(resolve) {\n      //   resolve(getDoc(u));\n      // })\n      // promise.then((us) => {\n      //   if(us.exists){\n      //     var the_user = us.data();\n      //     setUser(the_user);\n\n      //     if (the_user.question_liked.includes(the_slug)){\n      //       setLikeIt(true);\n      //     }else{\n      //       setLikeIt(false);\n      //     }\n\n      //     if (the_user.question_created.includes(the_slug)){\n      //       setMadeIt(true);\n      //     }else{\n      //       setMadeIt(false);\n      //     }\n\n      //     if(the_user.question_voted.some((q) => q.question === the_slug)){\n      //       setAnswered(true);\n      //       for(var i=0; i<the_user.question_voted.length; i++){\n      //         if(the_user.question_voted[i].question === the_slug) setYourVote(the_user.question_voted[i].answer)\n      //       }\n      //     }\n      //   }\n      // })\n    }\n\n    // const qu = doc(db, 'questions', the_slug);\n    // const promiseD = new Promise(function(resolve, reject) {\n    //   resolve(getDoc(qu));\n    // })\n    // promiseD.then((doc) => {\n    //   if(doc.exists){\n    //     setTheQuestion(doc.data());\n    //     const ques = query(collection(db, 'questions'), where('category', 'array-contains-any', doc.data().category), orderBy('created_at', 'desc'), limit(10));\n    //     const promiseDD = new Promise(function(resolve) {\n    //       resolve(getDocs(ques));\n    //     })\n        \n    //     promiseDD.then(qq => {\n    //       var questionSimilar = [];\n    //       Promise.all(qq.docs.map(async doc => {\n    //         questionSimilar.push(doc.data());\n    //         if(questionSimilar.length === 10) setLast(doc);\n    //       })).then(() => {\n    //         setRelatedQues(questionSimilar);\n    //       });\n    //     })\n    //   }else{\n    //     window.location.href = '/';\n    //   }\n    // });\n\n    // if(end === null){\n    //   setEnd(query(collection(db, 'questions'), orderBy('created_at', 'asc'), limit(1)));\n    // }\n  });\n\n  const loadMore = async () => {\n    var more = true;\n    setHasMore(false);\n\n    const next = await getDocs(query(collection(db, 'questions'), where('category', 'array-contains-any', the_question.category), orderBy('created_at', 'desc'), startAfter(last), limit(10)));\n    var ques = [];\n    await Promise.all(next.docs.map(async doc => {\n      ques.push(doc.data());\n      if(doc === end || ques.length === 10) {\n        if(doc === end) more = false;\n        setLast(doc);\n      }\n    })).then(() => setRelatedQues(relatedQues.concat(ques)));\n\n    if(more) setHasMore(true);\n    else setHasMore(false);\n  }\n\n  const onChoice = async (idx) => {\n    const the_choice = idx;\n\n    var the_slug = the_question.slug;\n    var your_vote = the_question.choices[the_choice].choice_text;\n    setYourVote(your_vote);\n    setAnswered(true);\n\n    var copy = Object.create(the_question);\n\n    copy.choices[the_choice].votes=parseInt(copy.choices[the_choice].votes, 10)+1;\n    \n    setTheQuestion(copy.__proto__);\n\n    await updateDoc(questionRef, {\n      choices: copy.choices,\n      all_votes: increment(1),\n      users_voted: arrayUnion(uid),\n    });\n\n    await updateDoc(userRef, {\n      question_voted: arrayUnion({ question: the_slug, answer: your_vote }),\n    })\n  }\n\n  const onLikeit = async () => {\n    if(likeIt){\n      setLikeIt(false);\n      await updateDoc(userRef, {\n        question_liked: arrayRemove(the_question.slug),\n      });\n      await updateDoc(questionRef, {\n        likes: increment(-1),\n      });\n      setTheQuestion({ ...the_question, likes: the_question.likes-1 });\n    }else{\n      setLikeIt(true);\n      await updateDoc(userRef, {\n        question_liked: arrayUnion(the_question.slug),\n      });\n      await updateDoc(questionRef, {\n        likes: increment(1),\n      });\n      setTheQuestion({ ...the_question, likes: the_question.likes+1 })\n    }\n  }\n\n  const onDelete = async () => {\n    await deleteDoc(questionRef);\n    await updateDoc(userRef, {\n      question_created: arrayRemove(the_question.slug),\n    })\n\n    window.location.href = \"/\";\n  }\n  \n  const onClose = () => {\n    setModalVisible(false);\n  }\n\n\n  if(the_question){\n    var copy=Array.from(the_question.choices);\n    copy.sort(function(first, second){\n      if (first.votes > second.votes){\n        return -1;\n      }else if (first.votes < second.votes){\n        return 1;\n      }else{\n        return 0;\n      }\n    });\n    choicesSorted = copy;\n\n    for(let i=0; i<copy.length;  i++){\n      l.push(copy[i].choice_text);\n      v.push(copy[i].votes);\n    }\n\n    var time = the_question.created_at;\n    var seconds = parseInt(time.slice(-2));\n    if(v !== []){\n      v.forEach((entry, idx) => {\n        c.push('hsla('+((idx+seconds)*70)+',75%,75%,1)');\n      });\n    }\n  }\n\n  return (\n    <Fragment>\n      <Helmet\n        title = {loaded && the_question.title}\n        meta={[\n          { name: 'description', content: { content } }\n        ]}\n      />\n      <div className={styles.resultsPos}>\n\n        <div className={styles.forSmallerVer}>\n          {/* カテゴリー */}\n          <div>\n            <p className={styles.category}><span className=\"text-primary fa fa-tag\" />\n              Category:\n              {loaded && (\n                <Fragment>\n                  {the_question.category.map((cate, idx) => {\n                    if ( idx === 0){\n                      return (<a className='text-primary' href={'/category/'+cate}> {cate}</a>)\n                    }else{\n                      return (<a className='text-primary' href={'/category/'+cate}>, {cate}</a>)\n                    }\n                  })}\n                </Fragment>\n              )}\n              {!loaded && <Skeleton style={{ marginLeft: 10 }} width={60} />}\n            </p>\n          </div>\n\n          {/* モーダル */}\n          {modalVisible &&  <ModalDelete onClose={onClose} onDelete={onDelete} />}\n\n          {/* タイトル */}\n          <h3 className={styles.title}>{loaded? the_question.title : <SkeletonTheme color=\"white\" highlightColor=\"#d3d3d3\"><Skeleton duration={2} width={1000 - smallDisplay*720} height={20}  /></SkeletonTheme>}</h3>\n          <p className={styles.date}>\n            {loaded ? the_question.created_on : <SkeletonTheme color=\"white\" highlightColor=\"#d3d3d3\"><Skeleton duration={2} color='white' width={100} height={7}/></SkeletonTheme> }\n          </p>\n          \n          <div style={{ marginBottom: 15 }}>\n            <a style={{ marginRight: 10, color: '#55acee', outline: 'none', border: 'none' }} className='tip' rel=\"noreferrer\" href={loaded && 'https://twitter.com/share?url=https://www.chooseone.app/'+the_question.slug+\"/&text=\"+the_question.title} target=\"_blank\" data-toggle=\"tooltip\" title=\"Share\"><TwitterIcon style={{ fontSize: smallDisplay && '18' }} /></a>\n            <a style={{ color: '#3B5998', outline: 'none', border: 'none' }} rel=\"noreferrer\" href={loaded && \"https://www.facebook.com/share.php?u=https://www.chooseone.app/\"+the_question.slug} target=\"_blank\" data-toggle=\"tooltip\" title=\"Share\"><FacebookIcon style={{ fontSize: smallDisplay && '18' }} /></a>\n          </div>\n\n          {answered && loaded && (\n            <div>\n              <p className={styles.your_vote}>You have voted for {your_vote}</p>\n            </div>\n          )}\n\n        </div>\n\n        {/* 選択肢 */}\n        {!answered && (\n          <div style={{ marginTop: 20 }}>\n            {loaded && (\n              <Fragment>\n                {the_question.choices.map((choice, idx) => (\n                  <div className={styles.choiceBtnPos}>\n                    <StyledButton variant=\"outlined\" color='primary' onClick={() => onChoice(idx)} >{choice.choice_text}</StyledButton>\n                  </div>\n                ))}\n              </Fragment>\n            )}\n            {!loaded && [choiceSkeleton]}\n            {warning !== null && (<p className={styles.warning}>{warning}</p>)}\n\n            {loaded && (\n              <div className={styles.voteBtnPos}>\n                <div className={styles.messageTextPos} >\n                  <Wave\n                    delay={3}\n                    text=\" TAP & GET SURPRISED\"\n                    effect='verticalFadeIn'\n                    effectChange={5.0}\n                  />\n                </div>\n              </div>\n            )}\n\n          </div>\n        )}\n\n        {/* グラフ系 */}\n        {answered && loaded && (\n          <Fragment>\n            <div className={styles.table} >\n              <table className='table' style={{ margin: 0 }}>\n                <thead>\n                  <tr>\n                    <td />\n                    <td>Choices</td>\n                    <td>Votes</td>\n                  </tr>\n                </thead>\n                <tbody>\n                  {choicesSorted.map((choice, idx) => (\n                    <tr style={{ backgroundColor: c[idx] }} >\n                      <th scope=\"row\">&nbsp;&nbsp;{idx+1}</th>\n                      <td >{choice.choice_text}</td>\n                      <td>{choice.votes}</td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n\n            <div className={styles.graphs}>\n              <div className={styles.pieGraph}><PieChart skeleton={!loaded} small={smallDisplay} labels={l} values={v} colors={c} /></div>\n              <div className={styles.barGraph}><BarChart skeleton={!loaded} small={smallDisplay} labels={l} values={v} colors={c} /></div>\n            </div>\n          </Fragment>\n        )}\n\n        {loaded && (\n          <Fragment>\n            {/* ボタン */}\n            <div className={styles.buttonsPos} style={{ marginTop: 100 - answered*80 }}>\n              <ThemeProvider theme={theme}>\n                <ButtonGroup size={smallDisplay ? 'small' : 'default'} variant=\"contained\" >\n                  {!likeIt && <Button onClick={onLikeit} startIcon={<FavoriteIcon fontSize='small'/>} color='primary' style={{ fontSize: 12 }}>{loaded ? the_question.likes : 'Like'}</Button>}\n                  {likeIt && <Button onClick={onLikeit} startIcon={<FavoriteIcon color='secondary' />} color='primary' style={{ fontSize: 12 }} >{loaded ? the_question.likes : 'Like'}</Button>}\n                  {madeIt && <Button onClick={() => setModalVisible(true)} startIcon={<DeleteIcon fontSize='small' />} style={{ fontSize: 12 }} color='secondary' >Delete</Button>}\n                </ButtonGroup>\n              </ThemeProvider>\n            </div>\n\n            {/* 似ている投稿 */}\n            {answered && (\n              <div>\n                <h3 className={styles.mayLike}>Questions You May Like</h3>\n                <div className={styles.similarPostsPos}>\n                  <InfiniteScroll\n                    loadMore={loadMore}\n                    hasMore={hasMore}\n                    threshold={500}\n                    loader={<div></div> }\n                  >\n                    {relatedQues.length !== 0 && <QuestionList questions={relatedQues} />}\n                  </InfiniteScroll>\n                  \n                  {relatedQues.length === 0 && <WindMillLoading style={{ position: 'relative', marginTop: 50, marginLeft: 50,}} color='rgb(39, 169, 68)' speed={1.2} size='large' />}\n                </div>\n              </div>\n            )}\n          </Fragment>\n        )}\n      </div>\n    </Fragment>\n  )\n}\n\nconst useStyles = makeStyles(() => createStyles({\n  choiceButton: {\n    \n  },\n  messageTextPos: {\n    fontSize: 13,\n    marginTop: 40,\n    fontFamily: 'Impact, sans-serif',\n    fontStyle: 'italic',\n    fontWeight: 900,\n    letterSpacing: '0.3em',\n    color: 'rgb(40, 168, 69)',\n    textShadow: '0.2 0.5px 0.5px 0px #004',\n    // transform: 'rotate(-10deg)',\n  },\n  category: {\n    fontFamily: 'latienne-pro, serif',\n    fontStyle: 'normal',\n    fontWeight: 400,\n    fontSize: 12,\n  },\n  title: {\n    fontFamily: 'latienne-pro, serif',\n    fontStyle: 'normal',\n    fontWeight: 500,\n    fontSize: 25,\n  },\n  mayLike: {\n    marginTop: 40,\n    marginBottom: 20,\n    fontFamily: 'lust-script, sans-serif',\n    fontStyle: 'normal',\n    fontWeight: 700,\n  },\n  similarPostsPos: {\n    width: '70%',\n  },\n  table: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    marginTop: 20,\n    marginBottom: 25,\n    backgroundColor: 'white',\n    width: '100%',\n  },\n  graphs: {\n    display: 'flex',\n    width: '100%',\n    marginBottom: 15,\n  },\n  pieGraph: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    padding: 10,\n    width: '49%',\n    backgroundColor: 'white',\n    height: 400,\n    marginRight: 10,\n  },\n  barGraph: {\n    filter: 'drop-shadow(0px 0px 5px rgba(160, 160, 160, 0.7))',\n    borderRadius: 15,\n    padding: 10,\n    width: '50%',\n    backgroundColor: 'white',\n    height: 400,\n  },\n  your_vote: {\n    color: 'yellowgreen',\n    fontSize: 14,\n  },\n  resultsPos: {\n    paddingTop: 15,\n    width: '100%',\n    paddingBottom: 30,\n  },\n  date: {\n    marginLeft: 20,\n    fontFamily: 'georgia, serif',\n    fontSize: 12,\n    color: '#457AFB',\n  },\n\n  // QuestionDetail\n\n  the_choice: {\n    marginLeft: 0,\n  },\n  choiceBtnPos: {\n    marginLeft: 25,\n    marginBottom: 8,\n    fontSize: 12,\n  },\n  voteBtnPos: {\n    marginTop: 20,\n    marginLeft: 25,\n  },\n  buttons: {\n    borderRadius: 30,\n  },\n\n  warning: {\n    color: 'red',\n    fontSize: 12,\n    margin: '0px 0px 0px 25px',\n    padding: 0,\n  },\n\n  '@media (max-width: 500px)': {\n    date: {\n      marginBottom: 10,\n    },\n    your_vote: {\n      fontSize: 12,\n      marginBottom: 10,\n    },\n    category: {\n      fontSize: 12,\n    },\n    title: {\n      fontSize: 24,\n      marginTop: 10,\n    },\n    mayLike: {\n      margin: '40px 0px 5px 10px',\n      fontSize: 20,\n    },\n    buttonsPos: {\n      marginLeft: 15,\n    },\n    forSmallerVer: {\n      paddingLeft: 15,\n      // marginTop: 10,\n    },\n    table: {\n      filter: 'drop-shadow(5px 0px 4px rgba(160, 160, 160, 0.7))',\n      marginTop: 10,\n      marginBottom: 4,\n    },\n    pieGraph: {\n      filter: 'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',\n      height: 150,\n      marginBottom: 7,\n      borderRadius: 4,\n      padding: 4,\n      marginRight: 3,\n    },\n    barGraph: {\n      filter: 'drop-shadow(0px 2px 2px rgba(160, 160, 160, 0.7))',\n      height: 150,\n      marginBottom: 4,\n      borderRadius: 4,\n      padding: 4,\n    },\n    similarPostsPos: {\n      width: '100%',\n    },\n    voteBtnPos: {\n      marginLeft: 15,   //　元は15\n    },\n    messageTextPos: {\n      marginLeft: 30,\n    },\n    choiceBtnPos: {\n      marginLeft: 35,\n    },\n  },\n}));\n\n\nconst StyledButton = withStyles({\n  root: {\n    borderColor: 'rgb(3, 122, 255)', \n    color: 'rgb(3, 122, 255)', \n    fontSize: 11, \n    borderRadius: 15, \n    width: Math.min(300, window.innerWidth*0.6),\n    textTransform: 'none',\n  },\n})(Button);"]},"metadata":{},"sourceType":"module"}